<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <meta name="description" content="<div style="white-space: pre-line;">Testtheorie mit R</div>">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="psychometrie.html">
<link rel="next" href="schleifen.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="einstieg.html"><a href="einstieg.html"><i class="fa fa-check"></i><b>1</b> Einstieg</a><ul>
<li class="chapter" data-level="1.1" data-path="einstieg.html"><a href="einstieg.html#uber-dieses-skript"><i class="fa fa-check"></i><b>1.1</b> Über dieses Skript</a><ul>
<li class="chapter" data-level="1.1.1" data-path="einstieg.html"><a href="einstieg.html#feedback-und-fehlermeldungen"><i class="fa fa-check"></i><b>1.1.1</b> Feedback und Fehlermeldungen</a></li>
<li class="chapter" data-level="1.1.2" data-path="einstieg.html"><a href="einstieg.html#danksagung"><i class="fa fa-check"></i><b>1.1.2</b> Danksagung</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="einstieg.html"><a href="einstieg.html#erste-schritte-mit-r"><i class="fa fa-check"></i><b>1.2</b> Erste Schritte mit <code>R</code></a><ul>
<li class="chapter" data-level="1.2.1" data-path="einstieg.html"><a href="einstieg.html#die-r-konsole"><i class="fa fa-check"></i><b>1.2.1</b> Die <code>R</code>-Konsole</a></li>
<li class="chapter" data-level="1.2.2" data-path="einstieg.html"><a href="einstieg.html#der-skript-editor"><i class="fa fa-check"></i><b>1.2.2</b> Der Skript-Editor</a></li>
<li class="chapter" data-level="1.2.3" data-path="einstieg.html"><a href="einstieg.html#kommentare"><i class="fa fa-check"></i><b>1.2.3</b> Kommentare</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="einstieg.html"><a href="einstieg.html#ausblick"><i class="fa fa-check"></i><b>1.3</b> Ausblick</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="vektoren.html"><a href="vektoren.html"><i class="fa fa-check"></i><b>2</b> Vektoren</a><ul>
<li class="chapter" data-level="2.1" data-path="vektoren.html"><a href="vektoren.html#variablen"><i class="fa fa-check"></i><b>2.1</b> Variablen</a><ul>
<li class="chapter" data-level="2.1.1" data-path="vektoren.html"><a href="vektoren.html#ausgabevsabspeichern"><i class="fa fa-check"></i><b>2.1.1</b> Ausgabe versus Abspeichern</a></li>
<li class="chapter" data-level="2.1.2" data-path="vektoren.html"><a href="vektoren.html#variablennamen"><i class="fa fa-check"></i><b>2.1.2</b> Variablennamen</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="vektoren.html"><a href="vektoren.html#datentypen-von-vektoren"><i class="fa fa-check"></i><b>2.2</b> Datentypen von Vektoren</a><ul>
<li class="chapter" data-level="2.2.1" data-path="vektoren.html"><a href="vektoren.html#character"><i class="fa fa-check"></i><b>2.2.1</b> <code>character</code></a></li>
<li class="chapter" data-level="2.2.2" data-path="vektoren.html"><a href="vektoren.html#logical"><i class="fa fa-check"></i><b>2.2.2</b> <code>logical</code></a></li>
<li class="chapter" data-level="2.2.3" data-path="vektoren.html"><a href="vektoren.html#factor"><i class="fa fa-check"></i><b>2.2.3</b> <code>factor</code></a></li>
<li class="chapter" data-level="2.2.4" data-path="vektoren.html"><a href="vektoren.html#na"><i class="fa fa-check"></i><b>2.2.4</b> <code>NA</code></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="vektoren.html"><a href="vektoren.html#logische-vergleiche"><i class="fa fa-check"></i><b>2.3</b> Logische Vergleiche</a><ul>
<li class="chapter" data-level="2.3.1" data-path="vektoren.html"><a href="vektoren.html#der-in-operator"><i class="fa fa-check"></i><b>2.3.1</b> Der <code>%in%</code> Operator</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="vektoren.html"><a href="vektoren.html#zugriff-auf-vektorelemente"><i class="fa fa-check"></i><b>2.4</b> Zugriff auf Vektorelemente</a><ul>
<li class="chapter" data-level="2.4.1" data-path="vektoren.html"><a href="vektoren.html#veczugriff"><i class="fa fa-check"></i><b>2.4.1</b> Der <code>[·]</code>-Zugriff</a></li>
<li class="chapter" data-level="2.4.2" data-path="vektoren.html"><a href="vektoren.html#logischerZugriff"><i class="fa fa-check"></i><b>2.4.2</b> <code>[·]</code>-Zugriff mit einem logischen Vektor</a></li>
<li class="chapter" data-level="2.4.3" data-path="vektoren.html"><a href="vektoren.html#vektorAendern"><i class="fa fa-check"></i><b>2.4.3</b> <code>[·]</code>-Zugriff zum Ändern von Daten</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="vektoren.html"><a href="vektoren.html#zusammenfassung"><i class="fa fa-check"></i><b>2.5</b> Zusammenfassung</a></li>
<li class="chapter" data-level="2.6" data-path="vektoren.html"><a href="vektoren.html#fragen-zum-vertiefenden-verstandnis"><i class="fa fa-check"></i><b>2.6</b> Fragen zum vertiefenden Verständnis</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataframes.html"><a href="dataframes.html"><i class="fa fa-check"></i><b>3</b> <code>data.frames</code></a><ul>
<li class="chapter" data-level="3.1" data-path="dataframes.html"><a href="dataframes.html#die-funktion-data.frame"><i class="fa fa-check"></i><b>3.1</b> Die Funktion <code>data.frame</code></a></li>
<li class="chapter" data-level="3.2" data-path="dataframes.html"><a href="dataframes.html#datenzugriffe"><i class="fa fa-check"></i><b>3.2</b> Datenzugriffe</a><ul>
<li class="chapter" data-level="3.2.1" data-path="dataframes.html"><a href="dataframes.html#zugriff-auf-eine-einzelne-spalte-die--notation"><i class="fa fa-check"></i><b>3.2.1</b> Zugriff auf eine einzelne Spalte: die <code>$</code>-Notation</a></li>
<li class="chapter" data-level="3.2.2" data-path="dataframes.html"><a href="dataframes.html#zugriff-auf-spalten-und-zeilen-die--notation"><i class="fa fa-check"></i><b>3.2.2</b> Zugriff auf Spalten und Zeilen: die <code>[·,·]</code>-Notation</a></li>
<li class="chapter" data-level="3.2.3" data-path="dataframes.html"><a href="dataframes.html#weitere-zugriffsmoglichkeiten-auf-spalten"><i class="fa fa-check"></i><b>3.2.3</b> Weitere Zugriffsmöglichkeiten auf Spalten</a></li>
<li class="chapter" data-level="3.2.4" data-path="dataframes.html"><a href="dataframes.html#subset"><i class="fa fa-check"></i><b>3.2.4</b> Zugriff auf Spalten und Zeilen: die Funktion <code>subset</code></a></li>
<li class="chapter" data-level="3.2.5" data-path="dataframes.html"><a href="dataframes.html#nameindex"><i class="fa fa-check"></i><b>3.2.5</b> Zugriff nach Name und Index</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="dataframes.html"><a href="dataframes.html#convenient"><i class="fa fa-check"></i><b>3.3</b> Nützliche Funktionen zum Arbeiten mit <code>data.frames</code></a><ul>
<li class="chapter" data-level="3.3.1" data-path="dataframes.html"><a href="dataframes.html#tapply"><i class="fa fa-check"></i><b>3.3.1</b> <code>tapply</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="dataframes.html"><a href="dataframes.html#nrow-und-ncol"><i class="fa fa-check"></i><b>3.3.2</b> <code>nrow</code> und <code>ncol</code></a></li>
<li class="chapter" data-level="3.3.3" data-path="dataframes.html"><a href="dataframes.html#head-und-tail"><i class="fa fa-check"></i><b>3.3.3</b> <code>head</code> und <code>tail</code></a></li>
<li class="chapter" data-level="3.3.4" data-path="dataframes.html"><a href="dataframes.html#sortieren-dplyrarrange"><i class="fa fa-check"></i><b>3.3.4</b> Sortieren: <code>dplyr::arrange</code></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="dataframes.html"><a href="dataframes.html#zusammenfassung-1"><i class="fa fa-check"></i><b>3.4</b> Zusammenfassung</a></li>
<li class="chapter" data-level="3.5" data-path="dataframes.html"><a href="dataframes.html#abschlieender-hinweis"><i class="fa fa-check"></i><b>3.5</b> Abschließender Hinweis</a></li>
<li class="chapter" data-level="3.6" data-path="dataframes.html"><a href="dataframes.html#fragen-zum-vertiefenden-verstandnis-1"><i class="fa fa-check"></i><b>3.6</b> Fragen zum vertiefenden Verständnis</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="psychometrie.html"><a href="psychometrie.html"><i class="fa fa-check"></i><b>4</b> Arbeiten mit psychometrischen Daten</a><ul>
<li class="chapter" data-level="4.1" data-path="psychometrie.html"><a href="psychometrie.html#kap4einstieg"><i class="fa fa-check"></i><b>4.1</b> Ausgedehntes Beispiel zum Einstieg</a><ul>
<li class="chapter" data-level="4.1.1" data-path="psychometrie.html"><a href="psychometrie.html#testscores"><i class="fa fa-check"></i><b>4.1.1</b> Testscores</a></li>
<li class="chapter" data-level="4.1.2" data-path="psychometrie.html"><a href="psychometrie.html#item-schwierigkeiten"><i class="fa fa-check"></i><b>4.1.2</b> Item-Schwierigkeiten</a></li>
<li class="chapter" data-level="4.1.3" data-path="psychometrie.html"><a href="psychometrie.html#item-interkorrelationen"><i class="fa fa-check"></i><b>4.1.3</b> Item-Interkorrelationen</a></li>
<li class="chapter" data-level="4.1.4" data-path="psychometrie.html"><a href="psychometrie.html#trennschaerfe"><i class="fa fa-check"></i><b>4.1.4</b> Item-Trennschärfen</a></li>
<li class="chapter" data-level="4.1.5" data-path="psychometrie.html"><a href="psychometrie.html#cronbachs-alpha"><i class="fa fa-check"></i><b>4.1.5</b> Cronbachs Alpha</a></li>
<li class="chapter" data-level="4.1.6" data-path="psychometrie.html"><a href="psychometrie.html#split-half-reliabilitat"><i class="fa fa-check"></i><b>4.1.6</b> Split-Half-Reliabilität</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="psychometrie.html"><a href="psychometrie.html#umgang-mit-echten-daten"><i class="fa fa-check"></i><b>4.2</b> Umgang mit echten Daten</a><ul>
<li class="chapter" data-level="4.2.1" data-path="psychometrie.html"><a href="psychometrie.html#umkodierung-von-variablen"><i class="fa fa-check"></i><b>4.2.1</b> Umkodierung von Variablen</a></li>
<li class="chapter" data-level="4.2.2" data-path="psychometrie.html"><a href="psychometrie.html#invertierung-von-antworten"><i class="fa fa-check"></i><b>4.2.2</b> Invertierung von Antworten</a></li>
<li class="chapter" data-level="4.2.3" data-path="psychometrie.html"><a href="psychometrie.html#umgang-mit-fehlenden-werten"><i class="fa fa-check"></i><b>4.2.3</b> Umgang mit fehlenden Werten</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="psychometrie.html"><a href="psychometrie.html#zusammenfassung-2"><i class="fa fa-check"></i><b>4.3</b> Zusammenfassung</a></li>
<li class="chapter" data-level="4.4" data-path="psychometrie.html"><a href="psychometrie.html#fragen-zum-vertiefenden-verstandnis-2"><i class="fa fa-check"></i><b>4.4</b> Fragen zum vertiefenden Verständnis</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="funktionen.html"><a href="funktionen.html"><i class="fa fa-check"></i><b>5</b> Funktionen</a><ul>
<li class="chapter" data-level="5.1" data-path="funktionen.html"><a href="funktionen.html#das-black-box-modell"><i class="fa fa-check"></i><b>5.1</b> Das Black-Box-Modell</a></li>
<li class="chapter" data-level="5.2" data-path="funktionen.html"><a href="funktionen.html#argumente"><i class="fa fa-check"></i><b>5.2</b> Argumente</a><ul>
<li class="chapter" data-level="5.2.1" data-path="funktionen.html"><a href="funktionen.html#help"><i class="fa fa-check"></i><b>5.2.1</b> Die <code>R</code>-Hilfe</a></li>
<li class="chapter" data-level="5.2.2" data-path="funktionen.html"><a href="funktionen.html#namenlose-argumente"><i class="fa fa-check"></i><b>5.2.2</b> Namenlose Argumente</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="funktionen.html"><a href="funktionen.html#ruckgabewerte"><i class="fa fa-check"></i><b>5.3</b> Rückgabewerte</a></li>
<li class="chapter" data-level="5.4" data-path="funktionen.html"><a href="funktionen.html#seiteneffekte"><i class="fa fa-check"></i><b>5.4</b> Seiteneffekte</a></li>
<li class="chapter" data-level="5.5" data-path="funktionen.html"><a href="funktionen.html#selbst-geschriebene-funktionen"><i class="fa fa-check"></i><b>5.5</b> Selbst geschriebene Funktionen</a><ul>
<li class="chapter" data-level="5.5.1" data-path="funktionen.html"><a href="funktionen.html#definition-der-eigenen-funktion"><i class="fa fa-check"></i><b>5.5.1</b> Definition der eigenen Funktion</a></li>
<li class="chapter" data-level="5.5.2" data-path="funktionen.html"><a href="funktionen.html#lokale-variablen"><i class="fa fa-check"></i><b>5.5.2</b> Lokale Variablen</a></li>
<li class="chapter" data-level="5.5.3" data-path="funktionen.html"><a href="funktionen.html#optionale-argumente"><i class="fa fa-check"></i><b>5.5.3</b> Optionale Argumente</a></li>
<li class="chapter" data-level="5.5.4" data-path="funktionen.html"><a href="funktionen.html#wann-schreibe-ich-meine-eigene-funktion"><i class="fa fa-check"></i><b>5.5.4</b> Wann schreibe ich meine eigene Funktion</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="funktionen.html"><a href="funktionen.html#fragen-zum-vertiefenden-verstandnis-3"><i class="fa fa-check"></i><b>5.6</b> Fragen zum vertiefenden Verständnis</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="schleifen.html"><a href="schleifen.html"><i class="fa fa-check"></i><b>6</b> Schleifen</a><ul>
<li class="chapter" data-level="6.1" data-path="schleifen.html"><a href="schleifen.html#sequentielle-bepunktung-von-testitems"><i class="fa fa-check"></i><b>6.1</b> Sequentielle Bepunktung von Testitems</a></li>
<li class="chapter" data-level="6.2" data-path="schleifen.html"><a href="schleifen.html#berechnung-von-part-whole-korrigierten-trennscharfen"><i class="fa fa-check"></i><b>6.2</b> Berechnung von part-whole korrigierten Trennschärfen</a></li>
<li class="chapter" data-level="6.3" data-path="schleifen.html"><a href="schleifen.html#datenspeicherung-in-einer-schleife"><i class="fa fa-check"></i><b>6.3</b> Datenspeicherung in einer Schleife</a><ul>
<li class="chapter" data-level="6.3.1" data-path="schleifen.html"><a href="schleifen.html#adressierung-per-name"><i class="fa fa-check"></i><b>6.3.1</b> Adressierung per Name</a></li>
<li class="chapter" data-level="6.3.2" data-path="schleifen.html"><a href="schleifen.html#vektorspeicherung-adressierung-per-index"><i class="fa fa-check"></i><b>6.3.2</b> Vektorspeicherung – Adressierung per Index</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="schleifen.html"><a href="schleifen.html#for-loops-are-evil-oder-nicht"><i class="fa fa-check"></i><b>6.4</b> for-loops are evil – oder nicht?</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="simulationen.html"><a href="simulationen.html"><i class="fa fa-check"></i><b>7</b> Simulationen</a></li>
<li class="chapter" data-level="8" data-path="anhang.html"><a href="anhang.html"><i class="fa fa-check"></i><b>8</b> Anhang</a><ul>
<li class="chapter" data-level="8.1" data-path="anhang.html"><a href="anhang.html#datenEinlesen"><i class="fa fa-check"></i><b>8.1</b> Daten einlesen</a></li>
<li class="chapter" data-level="8.2" data-path="anhang.html"><a href="anhang.html#das-environment-sauber-halten"><i class="fa fa-check"></i><b>8.2</b> Das Environment sauber halten</a><ul>
<li class="chapter" data-level="8.2.1" data-path="anhang.html"><a href="anhang.html#variablen-loschen"><i class="fa fa-check"></i><b>8.2.1</b> Variablen löschen</a></li>
<li class="chapter" data-level="8.2.2" data-path="anhang.html"><a href="anhang.html#mit-einem-sauberen-environment-starten"><i class="fa fa-check"></i><b>8.2.2</b> Mit einem sauberen Environment starten</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="referenzen.html"><a href="referenzen.html"><i class="fa fa-check"></i>Referenzen</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><div style="white-space: pre-line;">Testtheorie mit R</div></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="funktionen" class="section level1">
<h1><span class="header-section-number">5</span> Funktionen</h1>
<p>Funktionen sind das Herz der <code>R</code>-Maschinerie. Jegliche Befehle, die wir in <code>R</code> durchführen, sind als Funktionen umgesetzt.<a href="#fn59" class="footnoteRef" id="fnref59"><sup>59</sup></a> Wir haben bereits ausgiebig von Funktionen Gebrauch gemacht. Wir haben beispielsweise mit <code>subset</code> Daten ausgewählt, mit <code>table</code> und <code>tapply</code> deskriptive Statistiken angefordert, und mit <code>cor</code>, <code>colMeans</code> und <code>psychometric::alpha</code> psychometrische Berechnungen durchgeführt. Dabei haben wir bereits einige Eigenschaften von Funktionen zur Kenntnis genommen, etwa dass sie Namen haben,<a href="#fn60" class="footnoteRef" id="fnref60"><sup>60</sup></a> Argumente annehmen und ihre Rückgabewerte in Variablen gespeichert werden können. In diesem Kapitel soll nun ein tiefgründigerer Blick auf Funktionen in <code>R</code> gelegt werden. Am Ende des Kapitels lernen wir, unsere eigenen Funktionen zu schreiben.</p>
<div id="das-black-box-modell" class="section level2">
<h2><span class="header-section-number">5.1</span> Das Black-Box-Modell</h2>
<p>Diese Grafik zeigt schematisch die Arbeitsweise von <code>R</code>-Funktionen:</p>
<div class="figure">
<img src="images/BlackBoxModel.jpg" />

</div>
<p>Funktionen nehmen Argumente an, die ihr Verhalten steuern. Sie geben genau ein <code>R</code>-Objekt zurück, das Rückgabewert genannt wird. Wenn der Aufruf einer Funktion außer dieser Rückgabe weitere Auswirkung auf die “Umgebung” hat, nennt man das einen Seiteneffekt. Als <code>R</code>-Neuling ist es manchmal wichtig zu verstehen, was der Unterschied zwischen den Seiteneffekten und der Rückgabe einer Funktion ist.</p>
<p>Die innere Arbeitsweise von Funktionen wird als “Black Box” betrachtet. Wir wissen nicht unbedingt, wie eine Funktion intern funktioniert, was uns aber auch nicht interessiert. So lange uns <code>mean</code> den korrekten Mittelwert ausgibt, ist uns egal, wie <code>mean</code> den Mittelwert berechnet.<a href="#fn61" class="footnoteRef" id="fnref61"><sup>61</sup></a> Bei Funktionen interessiert uns in erster Linie, welche Daten wir einer Funktion als Argumente übergeben müssen und was sie uns dafür in Austausch zurückgeben. Die folgenden Abschnitte befassen sich mit den einzelnen Bestandteilen des „Black-Box-Modells“.</p>
</div>
<div id="argumente" class="section level2">
<h2><span class="header-section-number">5.2</span> Argumente</h2>
<p>Argumente determinieren das Verhalten von Funktionen. Im einfachsten Fall bedeutet das, dass die Elemente eines Vektors, den wir <code>mean</code> übergeben, den ausgegebenen Mittelwert determinieren. Wenn wir gar keinen Vektor übergeben, erhalten wir kein Ergebnis, sondern eine Fehlermeldung:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>()
Fehler <span class="cf">in</span> <span class="kw">mean.default</span>() <span class="op">:</span><span class="st"> </span>Argument <span class="st">&quot;x&quot;</span> <span class="kw">fehlt</span> (ohne
Standardwert)</code></pre></div>
<p>Um zu verstehen, wie man mit Argumenten das Verhalten von Funktionen beeinflusst, ist ein Verständnis der folgenden Punkte wichtig:<a href="#fn62" class="footnoteRef" id="fnref62"><sup>62</sup></a></p>
<ol style="list-style-type: decimal">
<li>Manche Argumente haben Standardwerte (Englisch: „default values“), die angenommen werden, wenn wir diese Argumente beim Aufrufen der Funktion nicht explizit angeben. Diese Argumente heißen <em>optionale Argumente</em>.</li>
<li>Wenn Argumente keinen Standardwert haben, <strong>müssen</strong> wir dem Argument einen Wert übergeben, da die Funktion sonst eine Fehlermeldung und kein Ergebnis ausgibt.<a href="#fn63" class="footnoteRef" id="fnref63"><sup>63</sup></a></li>
<li>Argumente haben Namen, die wir verwenden können, um sie in der Form <code>Argumentname = Wert</code> zu adressieren.</li>
<li>Wenn wir für ein Argument nicht explizit den Namen angeben, wird das Argument nach seiner Position in der Liste aller angegeben Argumente identifiziert.</li>
<li>Mit der <code>R</code>-Hilfe können wir herausfinden, welche Argumente Funktionen annehmen, wie diese heißen, und welche davon optional oder verpflichtend sind.</li>
</ol>
<p>Wir werden diese Punkte nun exemplarisch anhand der Funktion <code>mean</code> nachvollziehen. Wir wissen bereits, dass <code>mean</code> mindestens zwei Argumente annimmt. Beide Argumente haben Namen:</p>
<ul>
<li><code>x</code>: der numerische oder logische Vektor, für den der Mittelwert bestimmt werden soll</li>
<li><code>na.rm</code>: ein ein-elementiger logischer Vektor, der angibt, ob <code>NA</code>-Werte von der Berechnung ausgeschlossen werden sollen</li>
</ul>
<p>Da der Aufruf <code>mean</code> ohne Angabe eines numerischen oder logischen Vektors einen Fehler ergibt, ist uns klar, dass <code>x</code> kein optionales Argument ist. Wir <strong>müssen</strong> einen Vektor übergeben, für den wir einen Mittelwert bestimmen können. Wieso <code>mean</code> auch sonst aufrufen?</p>
<p>Auf der anderen Seite wissen wir auch, dass wir das Argument <code>na.rm</code> nicht unbedingt angeben müssen – das würden wir normalerweise nur dann machen, wenn wir wissen, dass unsere Daten fehlende Werte enthalten. Folgender Aufruf funktioniert nämlich, ohne dass wir dem Argument <code>na.rm</code> einen Wert übergeben:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</code></pre></div>
<pre><code>[1] 5.5</code></pre>
<p>Doch was passiert mit <code>na.rm</code>, wenn wir es nicht explizit angeben? Hierbei nehmen wir folgende Regel zur Kenntnis: <strong>Optionale Argumente sind deswegen optional, da ihnen von der Funktion ein Wert zugewiesen wird, wenn wir das Argument nicht selbst übergeben</strong>. Das Argument <code>na.rm</code> hat den Standardwert <code>FALSE</code>, weswegen <code>NA</code>-Werte im Normalfall nicht von der Berechnung ausgeschlossen werden. Stattdessen wird uns <code>NA</code> zurückgegeben, wenn <code>x</code> mindestens einen fehlenden Wert enthält. Folgende Aufrufe sind demnach äquivalent:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">mean</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)
<span class="kw">mean</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">na.rm =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>Da wir nicht immer alle optionalen Argumente von Funktionen angeben wollen – stattdessen “vertrauen” wir auf die Standardwerte –, ist es sehr hilfreich, dass wir Funktionsargumente per Namen ansprechen können. So können wir nur genau die optionalen Argumente auswählen, die wir anpassen wollen; für die anderen belassen wir den Standardwert. Das haben wir bei der Funktion <code>mean</code> kennengelernt: Nur wenn wir fehlende Werte von der Berechnung des Mittelwerts ausschließen wollen, weisen wir dem Argument <code>na.rm</code> den Wert <code>TRUE</code> zu:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="ot">NA</span>), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 2</code></pre>
<p>Interessanterweise wissen wir bislang gar nicht, ob wir an dieser Stelle <code>na.rm</code> tatsächlich mit Namen ansteuern müssen. In Funktionen können wir Argumente ja anhand ihres Namens <em>oder</em> ihrer Position ansprechen. Wenn <code>na.rm</code> das zweite Argument wäre, könnten wir auch folgenden Aufruf verwenden:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="ot">NA</span>), <span class="ot">TRUE</span>)
Fehler <span class="cf">in</span> <span class="kw">mean.default</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="ot">NA</span>), <span class="ot">TRUE</span>) <span class="op">:</span>
<span class="st">  &#39;trim&#39;</span> must be numeric of length one</code></pre></div>
<p>Das hat aber nicht funktioniert. Diese Fehlermeldung informiert uns darüber, dass <code>mean</code> an der zweiten Position ein Argument mit dem Namen “<code>trim</code>” erwartet. Offensichtlich hat <code>mean</code> mit <code>trim</code> noch ein weiteres optionales Argument, das wir bislang gar nicht kannten. Das heißt für uns: Solange wir für <code>trim</code> – was auch immer das ist – keinen Wert angeben, müssen wir <code>na.rm</code> per Namen ansprechen.</p>
<p>Wenn wir Argumente mit Namen ansteuern, brauchen wir uns über die Reihenfolge der Argumente keine Gedanken machen. Das ist oftmals sehr hilfreich. Deswegen funktioniert folgender Aufruf:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(<span class="dt">na.rm =</span> <span class="ot">FALSE</span>, <span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</code></pre></div>
<pre><code>[1] 5.5</code></pre>
<p>Wir erweitern nun das Beispiel von oben unter Berücksichtigung unseres Wissens über die Vergabe von Namen bei Funktionsargumenten. Folgende Aufrufe sind alle äquivalent:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)
<span class="kw">mean</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">na.rm =</span> <span class="ot">FALSE</span>)
<span class="kw">mean</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)
<span class="kw">mean</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">na.rm =</span> <span class="ot">FALSE</span>)
<span class="kw">mean</span>(<span class="dt">na.rm =</span> <span class="ot">FALSE</span>, <span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</code></pre></div>
<p>Nicht äquivalent zu den obigen Aufrufen sind jedoch folgende Befehle, die zu Fehlermeldungen führen, da <code>na.rm</code> nicht das zweite Argument von <code>mean</code> ist:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="ot">FALSE</span>)
<span class="kw">mean</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="ot">FALSE</span>)</code></pre></div>
<p>Wir haben nun gelernt, wie wir Argumente an Funktionen übergeben können. Dieses Wissen hilft uns jedoch nur, wenn wir folgende Frage beantworten können:</p>
<p><strong>Wie finden wir heraus, welche Argumente eine Funktion annimmt?</strong></p>
<div id="help" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Die <code>R</code>-Hilfe</h3>
<p>In <code>R</code> sind bereits sehr viele statistische und testtheoretische Analysen als Funktionen verfügbar. Wenn diese Funktionen noch nicht in der Basisversion von <code>R</code> enthalten sind, sind sie stattdessen häufig in externen Paketen verfügbar. So können wir beispielsweise ANOVAs, explorative oder konfirmatorische Faktorenanalysen und viele andere Auswertungen durchführen – wenn wir denn wollen. Wir benötigen dabei nur das folgende Wissen:</p>
<ol style="list-style-type: decimal">
<li>Welche Funktion führt die gewünschte Berechnung aus?</li>
<li>Wie können wir diese Funktionen bedienen?</li>
</ol>
<p>Wir beschäftigen uns im Folgenden mit dem zweiten Punkt.<a href="#fn64" class="footnoteRef" id="fnref64"><sup>64</sup></a> Wir lernen, wie wir uns mit der <code>R</code>-Hilfe einen Überblick über die Arbeitsweise von Funktionen verschaffen können. Probieren wir es exemplarisch für die Funktion <code>mean</code> aus:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?mean</code></pre></div>
<p>Interessant ist für uns erst einmal der obere Abschnitt “Usage”:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Usage<span class="op">:</span>

<span class="st">    </span><span class="kw">mean</span>(x, ...)

    ## Default S3 method:
    <span class="kw">mean</span>(x, <span class="dt">trim =</span> <span class="dv">0</span>, <span class="dt">na.rm =</span> <span class="ot">FALSE</span>, ...)</code></pre></div>
<p>Wir ignorieren an dieser Stelle, dass uns zwei Varianten angeboten werden, die Funktion <code>mean</code> zu nutzen.<a href="#fn65" class="footnoteRef" id="fnref65"><sup>65</sup></a> Wenn in der Hilfe eine „Default S3 method“ angeboten wird, interessiert uns oftmals diese; so ist es auch hier der Fall. An dieser Stelle finden wir die Informationen, die wir benötigen, um die Funktion zu nutzen. Wir sehen</p>
<ul>
<li>die Namen der Argumente</li>
<li>die Reihenfolge der Argumente</li>
<li>welche Argumente optional sind</li>
<li>was die Standardwerte der optionalen Argumente sind</li>
</ul>
<p>Die Standardwerte der optionalen Argumente lassen sich dadurch ablesen, dass in der Argumentliste in der Form <code>Argumentname = Wert</code> schon ein Wert angegeben ist. Das Argument <code>trim</code> etwa hat den Standardwert <code>0</code>. Wie wir bereits wissen, hat das Argument <code>na.rm</code> hat den Standardwert <code>FALSE</code>. Bei nicht-optionalen Argumenten ist kein Standardwert, sondern nur der Name des Arguments angegeben.</p>
<p>Wenn wir mehr über die Argumente erfahren wollen, müssen wir den Abschnitt “Arguments” der <code>R</code>-Hilfe konsultieren. Folgende Punkte interessieren uns bei der Beschreibung:</p>
<ol style="list-style-type: decimal">
<li>Was ist die inhaltliche Bedeutung eines Arguments?</li>
<li>Was für ein <code>R</code>-Objekt muss ich übergeben, um ein Argument anzusteuern? (Z.B. einen Vektor, einen <code>data.frame</code>, eine <code>matrix</code>, eine <code>list</code> oder sogar eine Funktion – siehe <a href="dataframes.html#tapply">Kapitel 3: Funktion tapply</a>)</li>
</ol>
<p>Die Beschreibung der Argumente achtet sehr auf Prägnanz und technische Korrektheit, wie wir am Beispiel der Beschreibung der Argumente der Funktion <code>mean</code> erkennen können:</p>
<pre><code>Arguments:

    x: An R object.  Currently there are methods for
       numeric/logical vectors and date, date-time and
       time interval objects. Complex vectors are allowed
       for ‘trim = 0’, only.

    trim: the fraction (0 to 0.5) of observations to
       be trimmed from each end of ‘x’ before the mean
       is computed.  Values of trim outside that range
       are taken as the nearest endpoint.

    na.rm: a logical value indicating whether ‘NA’ values
       should be stripped before the computation proceeds.</code></pre>
<p>Die <code>R</code>-Hilfe ist also hilfreich, aber nicht immer ganz leicht zu nutzen. Oftmals ist eine weitere Google-Recherche oder das Nachfragen bei einer Freundin oder einem Freund sinnvoll, wenn man die Nutzung einer Funktion meistern will. Mehr Hilfe zur Nutzung einer Funktion finden wir im Abschnitt “Examples” der <code>R</code>-Hilfe. Hier können wir am konkreten Beispiel betrachten, wie die Funktion angewendet werden kann. Wenn wir Glück haben, ist genau das dabei, was wir brauchen. Der Code ist dabei so gewählt, dass man ihn per Copy &amp; Paste auch selbst in der Konsole ausführen kann. Bei <code>mean</code> finden wir etwa den folgenden Beispiel-Code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Examples<span class="op">:</span>
<span class="st">     </span>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">50</span>)
     xm &lt;-<span class="st"> </span><span class="kw">mean</span>(x)
     <span class="kw">c</span>(xm, <span class="kw">mean</span>(x, <span class="dt">trim =</span> <span class="fl">0.10</span>))</code></pre></div>
</div>
<div id="namenlose-argumente" class="section level3">
<h3><span class="header-section-number">5.2.2</span> Namenlose Argumente</h3>
<p>In der Einführung in die Arbeitsweise von Funktionsargumenten habe ich behauptet, dass Argumente Namen haben. Wie fast jede allgemeine Regel hat auch diese Regel Ausnahmen – Argumente haben nämlich gar nicht immer einen Namen. Das ist für uns zwar nicht ganz so wichtig, aber wir können es hier zur Kenntnis nehmen. Wir haben sogar schon mit Funktionen gearbeitet, die namenlose Argumente annehmen können. Das ist beispielsweise immer dann notwendig, wenn Funktionen eine beliebige Anzahl von Argumenten annehmen. Die Funktion <code>c</code> nimmt beliebig viele Vektoren entgegen, die dann zu einem Vektor zusammengefügt werden. Auch andere Funktionen wie <code>table</code> – die beliebig viele Vektoren zur Erstellung von Kreuztabellen annimmt – und <code>dplyr::arrange</code> – die beliebig viele Kriterien zur Sortierung eines <code>data.frames</code> annimmt – haben unbenannte Argumente. In der <code>R</code>-Hilfe ist dies oftmals an dem Platzhalterargument “…” (lies: <em>ellipsis</em>) zu erkennen, siehe:<a href="#fn66" class="footnoteRef" id="fnref66"><sup>66</sup></a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?c

Usage<span class="op">:</span>

<span class="st">     </span>## S3 Generic function
<span class="st">     </span><span class="kw">c</span>(...)

     ## Default S3 method:
     <span class="kw">c</span>(..., <span class="dt">recursive =</span> <span class="ot">FALSE</span>, <span class="dt">use.names =</span> <span class="ot">TRUE</span>)

Arguments<span class="op">:</span>

<span class="st">     </span>...<span class="op">:</span><span class="st"> </span>objects to be concatenated.</code></pre></div>
</div>
</div>
<div id="ruckgabewerte" class="section level2">
<h2><span class="header-section-number">5.3</span> Rückgabewerte</h2>
<p>Der Rückgabewert einer Funktion ist das <code>R</code>-Objekt, das die Funktion ausgibt. Jede Funktion hat einen Rückgabewert. Die Funktion <code>mean</code> gibt beispielsweise einen ein-elementigen Vektor aus, der das arithmetische Mittel des Eingabevektors repräsentiert. Die Funktion <code>subset</code> gibt immer einen <code>data.frame</code> aus – wie der aussieht, bestimmen die Argumente, die wir der Funktion übergeben.</p>
<p>Das Verständnis von Rückgabewerten führt uns etwas tiefer in die Innereien der <code>R</code>-Programmiersprache. Betrachten wir im folgenden Beispiel die Funktion <code>t.test</code>, die einen <em>t</em>-Test durchführt und dabei die Mittelwerte zweier Vektoren vergleicht. Ich verwende den NPI-Datensatz aus Kapitel 4 und vergleiche den mittleren Narzissmus-Gesamtwert (Spalte <code>score</code>) zwischen weiblichen und männlichen Testnehmenden (Spalte <code>gender</code>; Kodierung: männlich = 1, weiblich = 2).<a href="#fn67" class="footnoteRef" id="fnref67"><sup>67</sup></a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t.test</span>(npi<span class="op">$</span>score[npi<span class="op">$</span>gender <span class="op">==</span><span class="st"> </span><span class="dv">1</span>],
       npi<span class="op">$</span>score[npi<span class="op">$</span>gender <span class="op">==</span><span class="st"> </span><span class="dv">2</span>])</code></pre></div>
<p>Wir erhalten folgende Ausgabe in der Konsole:</p>
<pre><code>
    Welch Two Sample t-test

data:  npi$score[npi$gender == 1] and npi$score[npi$gender == 2]
t = 13.249, df = 10681, p-value &lt; 2.2e-16
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 1.801341 2.426906
sample estimates:
mean of x mean of y 
 14.19595  12.08183 </code></pre>
<p>Hier werden uns alle relevanten Aspekte der <em>t</em>-Test-Berechnung ausgegeben. Ein erster interessanter Hinweis ist, dass kein klassischer <em>t</em>-Test, sondern ein “Welch Two Sample t-test” gerechnet wurde.<a href="#fn68" class="footnoteRef" id="fnref68"><sup>68</sup></a> Weiterhin werden uns t-Wert, Freiheitsgrade, p-Wert (“<code>p-value &lt; 2.2e-16</code>” bedeutet, dass der p-Wert so klein ist, dass vor dem ersten Wert hinter dem Komma, der <strong>nicht</strong> Null ist, mindestens 16 Nullen stehen), das 95%-Konfidenzintervall der Differenz der mittleren Werte, sowie die Mittelwerte selbst ausgegeben. Insgesamt kann man interpretieren, dass Männer im Mittel signifikant höhere Narzissmuswerte aufweisen als Frauen. Aber dieser Befund ist für uns in diesem Fall uninteressant – wir wollen uns ja mit dem Rückgabewert befassen. Was für ein <code>R</code>-Objekt wurde uns denn ausgegeben?</p>
<p>Was in der Konsole angezeigt wird, stellt nicht direkt das <code>R</code>-Objekt dar, das die Funktion <code>t.test</code> ausgibt. Es handelt sich hierbei um eine etwas lesefreundlichere Zusammenfassung des Tests. Um das tatsächlich ausgegebene Objekt zu inspizieren, kann ich die Funktion <code>str</code> verwenden. Dazu speichere ich die Ausgabe des t-Tests zunächst in einer Variablen ab:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test &lt;-<span class="st"> </span><span class="kw">t.test</span>(npi<span class="op">$</span>score[npi<span class="op">$</span>gender <span class="op">==</span><span class="st"> </span><span class="dv">1</span>],
               npi<span class="op">$</span>score[npi<span class="op">$</span>gender <span class="op">==</span><span class="st"> </span><span class="dv">2</span>])
<span class="kw">str</span>(test)</code></pre></div>
<pre><code>List of 9
 $ statistic  : Named num 13.2
  ..- attr(*, &quot;names&quot;)= chr &quot;t&quot;
 $ parameter  : Named num 10681
  ..- attr(*, &quot;names&quot;)= chr &quot;df&quot;
 $ p.value    : num 9.4e-40
 $ conf.int   : atomic [1:2] 1.8 2.43
  ..- attr(*, &quot;conf.level&quot;)= num 0.95
 $ estimate   : Named num [1:2] 14.2 12.1
  ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;mean of x&quot; &quot;mean of y&quot;
 $ null.value : Named num 0
  ..- attr(*, &quot;names&quot;)= chr &quot;difference in means&quot;
 $ alternative: chr &quot;two.sided&quot;
 $ method     : chr &quot;Welch Two Sample t-test&quot;
 $ data.name  : chr &quot;npi$score[npi$gender == 1] and npi$score[npi$gender == 2]&quot;
 - attr(*, &quot;class&quot;)= chr &quot;htest&quot;</code></pre>
<p>Das von <code>t.test</code> ausgegebene Objekt ist eine “List of 9”, also eine Liste mit 9 Einträgen. Listen sind sehr allgemeine Datencontainer, die Elemente von beliebigem Typ und beliebiger Anzahl beinhalten können.<a href="#fn69" class="footnoteRef" id="fnref69"><sup>69</sup></a> Listen stellen eine wichtige Datenstruktur in <code>R</code> dar – vielleicht ist es sogar die wichtigste Datenstruktur, da <code>data.frames</code> spezielle Listen sind, in denen jeder Eintrag (d.h., jede Spalte) ein Vektor gleicher Länge ist. Die Elemente der Liste können benannt sein, wie es bei der Rückgabe von <code>t.test</code> der Fall ist. In diesem Fall kann ich, wie wir es von der Spaltenauswahl in <code>data.frames</code> kennen, mit der <code>$</code>-Notation auf einzelne Elemente zugreifen:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test<span class="op">$</span>statistic <span class="co"># t-Wert als ein-elementiger Vektor</span></code></pre></div>
<pre><code>       t 
13.24906 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test<span class="op">$</span>alternative <span class="co"># ein- oder zweiseitiger Test?</span></code></pre></div>
<pre><code>[1] &quot;two.sided&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test<span class="op">$</span>parameter <span class="co"># Freiheitsgrade</span></code></pre></div>
<pre><code>     df 
10681.4 </code></pre>
<p>Es ist nicht unüblich, dass komplexere statistische Berechnungen eine Liste als Ausgabeobjekt ergeben. Listen sind dann sinnvoll, wenn während der Berechnung mehrere Werte anfallen und es nützlich ist, diese an den Nutzer zurückzugeben. Im Falle des t-Tests interessieren uns etwa die Freiheitsgrade, der t-Wert und der p-Wert.</p>
</div>
<div id="seiteneffekte" class="section level2">
<h2><span class="header-section-number">5.4</span> Seiteneffekte</h2>
<p>Jede Funktion hat genau einen Rückgabewert, also genau ein <code>R</code>-Objekt, das von der Funktion zurückgegeben wird. Jegliche Auswirkungen, die eine Funktion darüber hinaus hat – außerhalb der inneren Arbeitsweise –, werden Seiteneffekte genannt. Beispielsweise war die Konsolen-Ausgabe der Funktion <code>t.test</code> im oberen Fall ein Seiteneffekt. Wenn ich die Funktion <code>t.test</code> aufrufe, wird mir eine Zusammenfassung des Tests in der Konsole ausgeben, die als Mensch etwas einfacher zu verarbeiten ist als die Liste, die die “tatsächliche” Rückgabe darstellt. Das Zeichnen von Abbildungen ist auch als Seiteneffekt zu verstehen. Wenn wir beispielsweise <code>hist(npi$score)</code> aufrufen, wird uns ein Histogramm der Narzissmuswerte des NPI angezeigt. Dieses Histogramm ist ein Seiteneffekt und nicht die Ausgabe der Funktion <code>hist</code>; Interessierte sind aufgefordert herausfinden, was deren tatsächliche Rückgabe ist.</p>
<p>Ich werde die Diskussion von Seiteneffekten bei dieser kurzen und oberflächlichen Einführung belassen. Manchmal ist die Unterscheidung in Seiteneffekte und Rückgabe sinnvoll; wenn wir etwa die Ergebnisse einer Funktion weiter verwenden möchten, ist es wichtig zu wissen, welche Datenstruktur die Funktion ausgibt und wie wir auf die ausgegebenen Werte zugreifen können. Um Power-Analysen für t-Tests zu simulieren (eine Einführung in solche Simulationen wird in Kapitel 7 folgen), ist es beispielsweise nötig, die exakten p-Werte aus der Ausgabe der Funktion <code>t.test</code> auszulesen. In dem Fall werden wir die Funktion <code>t.test</code> gegebenenfalls 10,000 Mal aufrufen und können es uns nicht leisten, den p-Wert jedes Mal aus der Konsolen-Ausgabe abzulesen. Stattdessen wollen wir den Prozess der p-Wert-Extraktion automatisieren; und genau für solche Automatisierungen lernen wir das Programmieren.</p>
</div>
<div id="selbst-geschriebene-funktionen" class="section level2">
<h2><span class="header-section-number">5.5</span> Selbst geschriebene Funktionen</h2>
<p>Das Schreiben eigener Funktionen sollte früher oder später zum Repertoire eines <code>R</code>-Nutzers gehören. Mit selbst geschriebenen Funktionen können wir häufig durchgeführte Berechnungen abstrahieren und beliebig oft durchführen. Betrachten wir den folgenden Code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(<span class="fl">0.23</span> <span class="op">*</span><span class="st"> </span><span class="dv">2</span>) <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>(<span class="dv">2</span> <span class="op">-</span><span class="st"> </span><span class="dv">1</span>) <span class="op">*</span><span class="st"> </span><span class="fl">0.23</span>)
(<span class="fl">0.47</span> <span class="op">*</span><span class="st"> </span><span class="dv">3</span>) <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>(<span class="dv">3</span> <span class="op">-</span><span class="st"> </span><span class="dv">1</span>) <span class="op">*</span><span class="st"> </span><span class="fl">0.23</span>) <span class="co"># copy-paste Fehler</span>
(<span class="fl">0.68</span> <span class="op">*</span><span class="st"> </span><span class="dv">4</span>) <span class="op">/</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>(<span class="dv">4</span> <span class="op">-</span><span class="st"> </span><span class="dv">1</span>) <span class="op">*</span><span class="st"> </span><span class="fl">0.68</span>)</code></pre></div>
<p>Erkennt ihr, was berechnet wird? Falls nicht, betrachtet diesen Code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">spearman_brown</span>(<span class="fl">0.23</span>, <span class="dv">2</span>)
<span class="kw">spearman_brown</span>(<span class="fl">0.37</span>, <span class="dv">3</span>)
<span class="kw">spearman_brown</span>(<span class="fl">0.68</span>, <span class="dv">4</span>)</code></pre></div>
<p>In der ersten Variante sind nur ein paar Zahlen und arithmetische Operationen zu sehen, die Semantik der Berechnung ist jedoch vollkommen unklar. Durch das Copy-Pasten des Codes ist mir sogar ein Fehler unterlaufen, denn ich habe in der zweiten Zeile einmal vergessen den Wert 0.23 durch 0.47 auszutauschen – solche Fehler passieren häufig und sind sehr schwierig zu entdecken <span class="citation">(siehe Li et al. 2006)</span>. Durch die Nutzung der Funktion, die ich in Kapitel 4 definiert habe, ist der Code lesbarer geworden und einfach interpretierbar: Ich möchte drei Reliabilitätsschätzer um die Faktoren 2, 3 bzw. 4 korrigieren. Sofern ich bei der Definition meiner Funktion keinen Fehler gemacht habe, sind diese Aufrufe auch robuster gegenüber Copy-Paste-Fehlern.</p>
<p>Mit eigenen Funktionen folgen wir dem Programmierer-Credo „<em>do not repeat yourself</em>“. Wenn wir einmal Code zur Lösung eines Problems geschrieben haben, möchten wir denselben Code nicht noch einmal schreiben, um ein gleiches bzw. ähnliches Problem zu lösen. Eigene Funktionen helfen uns effizienter – man könnte sogar sagen: fauler – zu arbeiten. Außerdem führen sie zu besser lesbarem Code, denn Funktionsnamen<a href="#fn70" class="footnoteRef" id="fnref70"><sup>70</sup></a> kommunizieren die Intention von Code deutlich besser als das reine Aneinanderreihen von Zahlen, Operatoren und Variablen.</p>
<div id="definition-der-eigenen-funktion" class="section level3">
<h3><span class="header-section-number">5.5.1</span> Definition der eigenen Funktion</h3>
<p>Erinnern wir uns an die Spearman-Brown-Funktion, die ich in Kapitel 4 definiert habe:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span>   spearman_brown &lt;-<span class="st"> </span><span class="cf">function</span>(reliability, factor) {
<span class="dv">2</span>       numerator  &lt;-<span class="st"> </span>reliability <span class="op">*</span><span class="st"> </span>factor
<span class="dv">3</span>       denominator &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>(factor<span class="dv">-1</span>) <span class="op">*</span><span class="st"> </span>reliability
<span class="dv">4</span>       corrected_reliability &lt;-<span class="st"> </span>numerator <span class="op">/</span><span class="st"> </span>denominator
<span class="dv">5</span>       <span class="kw">return</span>(corrected_reliability)
<span class="dv">6</span>   }</code></pre></div>
<p>Um die Funktion zu definieren, führe ich diese sechs Zeilen Code einfach in der <code>R</code>-Konsole aus. In RStudio reicht es sogar, STRG-Enter zu drücken, wenn sich mein Cursor in Zeile 1 befindet. In dieser Zeile beginnt die Definition der Funktion: Ich erstelle eine Variable, der ich mit “<code>&lt;-</code>” eine Funktion zuweise. Die Funktion <code>spearman_brown</code> wird also mit der Funktion <code>function</code> erstellt (kein Witz). Die Funktion <code>function</code> nimmt die Argumente entgegen, die auch meine neu definierte Funktion <code>spearman_brown</code> annehmen soll. Die Parameter, die bei der Spearman-Brown-Korrektur eine Rolle spielen, sind der Reliabilitätsschätzer und der Korrekturfaktor. Aus diesem Grund werden die zwei Argumente <code>reliability</code> und <code>factor</code> definiert.</p>
<p>Auf die Definition der Argumente folgt der “Körper” (engl.: <em>body</em>) der Funktion. Der Körper führt die gewünschte Berechnung durch und verwendet dabei die Funktionsargumente als Variablen. Funktionsargumente sind also nichts anderes als Variablen, die im Innern einer Funktion leben. Der Körper der Funktion wird in geschwungenen Klammern <code>{·}</code> eingeschlossen. Solche Klammern bilden einen abgeschlossenen Block von <code>R</code>-Code; sie werden uns auch im nächsten Kapitel bei der Verwendung von Schleifen wieder begegnen.</p>
<p>In Zeile 5 wird mit der Funktion <code>return</code><a href="#fn71" class="footnoteRef" id="fnref71"><sup>71</sup></a> angegeben, dass die Variable <code>corrected_reliability</code> von der Funktion zurückgegeben werden soll. Das heißt: das <code>R</code>-Objekt, das innerhalb der Funktion in die Variable <code>corrected_reliability</code> geschrieben wird, ist der Rückgabewert der Funktion.</p>
</div>
<div id="lokale-variablen" class="section level3">
<h3><span class="header-section-number">5.5.2</span> Lokale Variablen</h3>
<p>Werfen wir noch einmal einen Blick auf den Körper der Funktion <code>spearman_brown</code>. Wir sehen hier bereits gewohnten <code>R</code>-Code – nichts Besonderes: Variablen werden geschrieben und Berechnungen werden durchgeführt. Ein wichtiger Punkt an diesen Berechnungen ist jedoch, dass sie nur innerhalb der Funktion stattfinden und keine Wirkungen “nach außen” haben. Was heißt das konkret? Beispielsweise sind alle Variablen, die innerhalb der Funktion definiert werden, sogenannte <em>lokale</em> Variablen. Im Gegensatz zu den lokalen Variablen stehen globale Variablen. Global waren alle Variablen, die wir bislang per <code>&lt;-</code> definiert haben. Solche globalen Variablen werden uns in RStudio im Panel oben rechts unter “Global Environment” angezeigt.</p>
<p>Lokale Variablen sind außerhalb der Funktion nicht sichtbar und verschwinden nach Aufruf der Funktion wieder.<a href="#fn72" class="footnoteRef" id="fnref72"><sup>72</sup></a> Es ist also nicht so, dass die Variablen <code>numerator</code>, <code>denominator</code> und <code>corrected_reliability</code> in die globale <code>R</code>-Umgebung geschrieben werden, wenn ich die Funktion <code>spearman_brown</code> aufrufe. Das ist extrem nützlich: Ich habe die Variablen <code>numerator</code> und <code>denominator</code> nur definiert, damit mein Code gut lesbar ist und die einzelnen Code-Zeilen nicht zu lang werden.<a href="#fn73" class="footnoteRef" id="fnref73"><sup>73</sup></a> Am Ende interessiert mich aber nur der Spearman-Brown-Schätzer als Ergebnis der Berechnung; Variablen, die ich als Zwischenergebnisse abspeichere, interessieren mich hingegen nicht. Wenn ich eine Funktion schreibe, bleiben solche Hilfsvariablen verborgen und nur der Rückgabewert dringt nach außen. Ich kann den Rückgabewert abfangen, indem ich ihn in einer Variablen abspeichere:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">split_half_correct &lt;-<span class="st"> </span><span class="kw">spearman_brown</span>(<span class="fl">0.63</span>, <span class="dv">2</span>)</code></pre></div>
<p>Durch diesen Befehl wird eine korrigierte Reliabilität in eine Variable mit dem Namen <code>split_half_correct</code> geschrieben; dass der Rückgabewert der Funktion innerhalb der Funktion in einer Variablen mit dem Namen <code>corrected_reliability</code> abgespeichert ist, ist für das ausgegebene Objekt nicht von Bedeutung.</p>
<p>Argumente sind ebenfalls lokale Variablen in der Funktion. Wenn wir einer Funktion also ein Argument übergeben, definieren wir damit eine lokale Variable mit dem Namen des Arguments innerhalb der Funktion. Daraus können wir beispielsweise schließen, dass im Code der Funktion <code>mean</code> irgendwo eine Variable mit dem Namen <code>na.rm</code> verwendet wird.</p>
</div>
<div id="optionale-argumente" class="section level3">
<h3><span class="header-section-number">5.5.3</span> Optionale Argumente</h3>
<p>Bei der Definition einer Funktion können wir Standardwerte vergeben und somit optionale Argumente definieren. Wenn wir beispielsweise davon ausgehen, dass wir die Spearman-Brown-Korrektur meistens verwenden, um eine Split-Half-Korrelation zu korrigieren, könnten wir das Argument <code>factor</code> per default auf 2 setzen. Das funktioniert wie folgt:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">spearman_brown &lt;-<span class="st"> </span><span class="cf">function</span>(reliability, <span class="dt">factor =</span> <span class="dv">2</span>) {
    ...
}</code></pre></div>
<p>Diese Schreibweise kennen wir schon vom Aufruf von Funktionen, wenn wir die Argumente mit Namen ansprechen. In diesem Fall können wir die Funktion <code>spearman_brown</code> auch wie folgt äquivalent verwenden:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">split_half_correct &lt;-<span class="st"> </span><span class="kw">spearman_brown</span>(<span class="fl">0.63</span>)
split_half_correct &lt;-<span class="st"> </span><span class="kw">spearman_brown</span>(<span class="fl">0.63</span>, <span class="dv">2</span>)</code></pre></div>
</div>
<div id="wann-schreibe-ich-meine-eigene-funktion" class="section level3">
<h3><span class="header-section-number">5.5.4</span> Wann schreibe ich meine eigene Funktion</h3>
<p>Wie wir in den letzten Abschnitten gesehen haben, ist die technische Definition einer Funktion keine schwierige Sache. Schwieriger ist häufiger die Antwort auf die Frage, wann ich tatsächlich eine Funktion schreiben will. Darauf gibt es keine einzige richtige Antwort, und am Ende muss jeder für sich selbst entscheiden. Generell ist eine sinnvolle Daumenregel, dann eine Funktion zu schreiben, wenn man denselben Code mehrfach geschrieben hat. Häufiges Copy &amp; Paste kann da ein guter Indikator sein. In dem Fall solltet ihr identifizieren, welche Details sich jeweils bei den verschiedenen Varianten des Codes geändert haben, und diese in Argumente umwandeln.</p>
<p>Um zu erkennen, wann Funktionen nützlich sind und welche Variablen man als Argumente umsetzen will, bedarf es sicherlich einiger Erfahrung mit <code>R</code>. Mein Tipp für Anfänger ist deswegen vor allem: Erst mal einfach “coden” – später Funktionen schreiben. Mit mehr Erfahrung kann sich diese Vorgehensweise ändern. Ich überlege oftmals schon in der Planungsphase eines Projekts, welche Funktionen sich sinnvollerweise anbieten und wie diese zusammen arbeiten sollten. Aber das Vorgehen hängt auch stark von der Art des Projekts ab. Wenn ich bloß Daten einlese und einen t-Test oder eine ANOVA rechne, muss ich dafür keine Funktion schreiben. Wenn ich hingegen viel mit Daten an sich arbeite – also oft Daten auswähle, transformiere und aus bestehenden Werten neue Werte ableite – machen eigene Funktionen oftmals mehr Sinn.</p>
</div>
</div>
<div id="fragen-zum-vertiefenden-verstandnis-3" class="section level2">
<h2><span class="header-section-number">5.6</span> Fragen zum vertiefenden Verständnis</h2>
<ol style="list-style-type: decimal">
<li>Was ist der Rückgabewert der Funktion <code>str</code>?</li>
<li>Was ist der Rückgabewert der Funktion <code>hist</code>?</li>
<li>Kann ich mit der Funktion <code>spearman_brown</code> gleichzeitig mehrere Reliabilitätsschätzer korrigieren? (Code inspizieren <span class="math inline">\(\to\)</span> überlegen <span class="math inline">\(\to\)</span> ausprobieren)</li>
</ol>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="59">
<li id="fn59"><p>Technisch gesehen sind sogar einfache Berechnungen wie die Addition oder die Auswahl von Elementen per <code>[·]</code> Funktionen. Wir betrachten hier jedoch Funktionen, die dem Schema <code>Funktionsname(Argument1, Argument2, ...)</code> folgen.<a href="funktionen.html#fnref59">↩</a></p></li>
<li id="fn60"><p>Interessanterweise können Funktionen sogar anonym sein, also keinen Namen haben. Aber dieser Spezialfall ist für uns erst einmal nicht von Interesse.<a href="funktionen.html#fnref60">↩</a></p></li>
<li id="fn61"><p>Das ist natürlich zunächst einmal anders, wenn wir selbst neue Funktionen schreiben. Aber auch dann gilt: Wenn ich die Funktion geschrieben habe und der Berechnung vertraue, kann ich später auf sie zugreifen, ohne mir jedes Mal über die interne Funktionsweise Gedanken zu machen. Das kann eine enorme Arbeitserleichterung sein.<a href="funktionen.html#fnref61">↩</a></p></li>
<li id="fn62"><p>Teilweise wurden diese Punkte schon in <a href="dataframes.html#subset">Kapitel 3 im Abschnitt zur Funktion <code>subset</code></a> angesprochen.<a href="funktionen.html#fnref62">↩</a></p></li>
<li id="fn63"><p>Das ist streng genommen auch wieder eine Vereinfachung. Aber für uns reicht dieses Konzept: Hat ein Argument einen Standardwert, ist es optional; hat ein Argument keinen Standardwert, ist es verpflichtend.<a href="funktionen.html#fnref63">↩</a></p></li>
<li id="fn64"><p>Auch wenn es häufig erst einmal der Knackpunkt ist zu wissen, ob es schon eine Funktion gibt, die das eigene Problem löst, wie diese heißt und in welchem Paket ich sie finde.<a href="funktionen.html#fnref64">↩</a></p></li>
<li id="fn65"><p>Viele Funktionen können auf verschiedene Arten aufgerufen werden. Das heißt: Sie können mit unterschiedlichen <code>R</code>-Objekten als Eingabe genutzt werden.<a href="funktionen.html#fnref65">↩</a></p></li>
<li id="fn66"><p>Wir nehmen interessiert zur Kenntnis, dass <code>c</code> zwei Argumente mit Standardwerten hat: <code>recursive</code> und <code>use.names</code>. Mit diesen Argumenten haben wir uns bislang nicht beschäftigt und das werden wir auch weiterhin nicht tun. Oftmals “vertraut” man den Standardwerten, wobei man damit früher oder später auch mal auf die Nase fallen wird.<a href="funktionen.html#fnref66">↩</a></p></li>
<li id="fn67"><p>An dieser Stelle ist es sinnvoll, noch einmal zu rekapitulieren, wie hier die Narzissmuswerte der Männer und Frauen ausgewählt werden.<a href="funktionen.html#fnref67">↩</a></p></li>
<li id="fn68"><p>Setzt man das Argument <code>var.equal</code> auf <code>TRUE</code>, wird ein klassischer t-Test gerechnet (Standardwert: <code>FALSE</code>). Es ist etwas ironisch, dass die Funktion <code>t.test</code> keinen t-Test rechnet. Wenn man das erwartet, könnte man an dieser Stelle auf die Nase fallen, wenn man einfach auf die Standardwerte der Funktion vertraut. Mehr Informationen zum Welch-t-Test finden sich hier: <a href="https://en.wikipedia.org/wiki/Welch%27s_t-test">https://en.wikipedia.org/wiki/Welch%27s_t-test</a>.<a href="funktionen.html#fnref68">↩</a></p></li>
<li id="fn69"><p>Ein Eintrag einer Liste könnte beispielsweise eine andere Liste sein.<a href="funktionen.html#fnref69">↩</a></p></li>
<li id="fn70"><p>Wie bei Variablen ist auch bei Funktionen eine sinnvolle Benennung unerlässlich.<a href="funktionen.html#fnref70">↩</a></p></li>
<li id="fn71"><p>Es ist nicht unbedingt nötig, <code>return</code> zur Definition von Rückgabewerten zu verwenden. Aber ich mache es immer so und verrate die Alternative auch nicht.<a href="funktionen.html#fnref71">↩</a></p></li>
<li id="fn72"><p>Umgekehrt gilt hingegen: Innerhalb einer Funktion kann man auf Variablen der globalen <code>R</code>-Umgebung zugreifen. Ignoriert das jedoch bitte. Werte, mit denen eine Funktion arbeitet, sollten der Funktion per Argument übergeben werden.<a href="funktionen.html#fnref72">↩</a></p></li>
<li id="fn73"><p>Es ist guter Stil, die Menge von Code pro Zeile zu begrenzen. Eine Daumenregel ist die Verwendung von nicht mehr als 80 Zeichen Code pro Zeile. Dafür kann es beispielsweise helfen, Zwischenberechnungen in Variablen abzuspeichern. Eigene Funktionen helfen ebenfall dabei, Code lesbar zu gestalten.<a href="funktionen.html#fnref73">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="psychometrie.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="schleifen.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
},
"search": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
