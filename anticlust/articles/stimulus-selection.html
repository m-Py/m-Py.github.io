<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using the R package anticlust for stimulus selection in experiments • anticlust</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using the R package anticlust for stimulus selection in experiments">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">anticlust</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.8.10-1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Best_practices.html">Some best practices for anticlustering</a>
    </li>
    <li>
      <a href="../articles/Categorical_vars.html">Using categorical variables with anticlustering</a>
    </li>
    <li>
      <a href="../articles/Speeding_up_anticlustering.html">Speeding up anticlustering</a>
    </li>
    <li>
      <a href="../articles/stimulus-selection.html">Using the R package anticlust for stimulus selection in experiments</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://m-py.github.io/anticlust-blog" class="external-link">Blog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/m-Py/anticlust/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using the R package anticlust for stimulus
selection in experiments</h1>
                        <h4 data-toc-skip class="author">Martin
Papenberg</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/m-Py/anticlust/blob/HEAD/vignettes/stimulus-selection.Rmd" class="external-link"><code>vignettes/stimulus-selection.Rmd</code></a></small>
      <div class="hidden name"><code>stimulus-selection.Rmd</code></div>

    </div>

    
    
<p>This tutorial teaches you how to use the <code>R</code> package
<code>anticlust</code> for stimulus selection in psychological
experiments. All code can easily be reproduced via Copy &amp; Paste. The
tutorial discusses the following functionalities:</p>
<ul>
<li>Match similar stimuli based on covariates of interest</li>
<li>Minimize differences between stimulus sets with regard to some
variables</li>
<li>Maximize differences between stimulus sets with regard to some
variables</li>
<li>Balance the occurrence of a categorical variable between stimulus
sets</li>
</ul>
<p>To follow the code in this tutorial, load the <code>anticlust</code>
package first:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/m-Py/anticlust" class="external-link">anticlust</a></span><span class="op">)</span></span></code></pre></div>
<p>For the examples in this document, we use norming data for a stimulus
set provided by Schaper, Kuhlmann and Bayen (2019a, 2019b). It is
available when the package <code>anticlust</code> is loaded:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"schaper2019"</span><span class="op">)</span></span>
<span><span class="co"># look at the data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">schaper2019</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 item     room rating_consistent rating_inconsistent syllables</span></span>
<span><span class="co">#&gt; 1 Feuchtigkeitsmaske bathroom              4.10                1.04         5</span></span>
<span><span class="co">#&gt; 2        Damenbinden bathroom              4.22                1.12         4</span></span>
<span><span class="co">#&gt; 3          Haarspray bathroom              4.32                1.13         2</span></span>
<span><span class="co">#&gt; 4             Tampon bathroom              4.35                1.22         2</span></span>
<span><span class="co">#&gt; 5          Badewanne bathroom              4.55                1.02         4</span></span>
<span><span class="co">#&gt; 6     Ohrenstaebchen bathroom              4.63                1.26         4</span></span>
<span><span class="co">#&gt;   frequency list</span></span>
<span><span class="co">#&gt; 1        21    1</span></span>
<span><span class="co">#&gt; 2        19    1</span></span>
<span><span class="co">#&gt; 3        17    1</span></span>
<span><span class="co">#&gt; 4        17    1</span></span>
<span><span class="co">#&gt; 5        13    1</span></span>
<span><span class="co">#&gt; 6        21    1</span></span></code></pre></div>
<p>The item pool consists of 96 German words, given in the column
<code>item</code>. Each word represents an object that is either
typically found in a bathroom or in a kitchen. For their experiments,
Schaper et al.  partitioned the pool into 3 word lists that should be as
similar as possible with regard to four numeric criteria (that is:
<code>rating_consistent</code>, <code>rating_inconsistent</code>,
<code>syllables</code>, <code>frequency</code>). Typically, stimulus
sets may contain more than 96 elements (and the selection usually
becomes more effective when the pool is larger), but the logic for
stimulus selection that is applied in this tutorial can be transfered to
arbitrarily large stimulus sets.</p>
<div class="section level2">
<h2 id="example-1a-maximize-differences-in-frequency">Example 1a: Maximize differences in frequency<a class="anchor" aria-label="anchor" href="#example-1a-maximize-differences-in-frequency"></a>
</h2>
<p>In the first example, I select two word lists that differ on
frequency but are as similar as possible with regard to consistency
ratings and the number of syllables. First, I need to define the
boundaries that define “high” and “low” frequency. Note that
<code>frequency</code> is reverse-coded such that low values actually
indicate high frequency. Here, I arbitrarily define values below 18 as
“high” frequency and above 19 as “low” frequency, but any user-defined
splits are possible.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">schaper2019</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">within</a></span><span class="op">(</span><span class="va">schaper2019</span>, <span class="op">{</span></span>
<span>  <span class="va">freq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">frequency</span> <span class="op">&lt;</span> <span class="fl">18</span>, <span class="st">"high"</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span>  <span class="va">freq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">frequency</span> <span class="op">&gt;</span> <span class="fl">19</span>, <span class="st">"low"</span>, <span class="va">freq</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>This code defined a new column <code>freq</code> for the data set
<code>schaper2019</code> that is either “low”, “high” or missing
(<code>NA</code>). Let’s check it out:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">schaper2019</span><span class="op">$</span><span class="va">freq</span></span>
<span><span class="co">#&gt;  [1] "low"  NA     "high" "high" "high" "low"  NA     "high" "high" "low" </span></span>
<span><span class="co">#&gt; [11] NA     "low"  "high" "high" NA     "high" "high" "high" "low"  "low" </span></span>
<span><span class="co">#&gt; [21] "high" "low"  "high" "high" "low"  NA     "low"  "high" "low"  "high"</span></span>
<span><span class="co">#&gt; [31] NA     "high" "high" "high" NA     NA     "low"  NA     "low"  "high"</span></span>
<span><span class="co">#&gt; [41] "low"  NA     "low"  "high" "low"  "high" NA     NA     NA     NA    </span></span>
<span><span class="co">#&gt; [51] NA     "low"  "low"  "low"  NA     "high" "high" "low"  "low"  "low" </span></span>
<span><span class="co">#&gt; [61] "low"  NA     "high" "high" NA     "low"  NA     "low"  NA     NA    </span></span>
<span><span class="co">#&gt; [71] "low"  NA     NA     "low"  "low"  NA     NA     "high" "high" NA    </span></span>
<span><span class="co">#&gt; [81] "low"  "low"  NA     "low"  "high" "high" NA     "high" "low"  "high"</span></span>
<span><span class="co">#&gt; [91] NA     NA     "high" NA     NA     "high"</span></span></code></pre></div>
<p>Before matching high and low frequency words, it is necessary to
remove cases that are not selected, i.e. where the entry in
<code>freq</code> is <code>NA</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">schaper2019</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">freq</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># see how many cases were selected:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">selected</span><span class="op">$</span><span class="va">freq</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; high  low </span></span>
<span><span class="co">#&gt;   33   31</span></span></code></pre></div>
<p>Now, I use the <code>anticlust</code> function
<code><a href="../reference/matching.html">matching()</a></code> to find paired words of high and low frequency
that are as similar as possible on consistency and the number of
syllables:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Match the conditions based on covariates</span></span>
<span><span class="va">covariates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">selected</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">selected</span><span class="op">$</span><span class="va">matches</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/matching.html">matching</a></span><span class="op">(</span></span>
<span>  <span class="va">covariates</span>, </span>
<span>  match_between <span class="op">=</span> <span class="va">selected</span><span class="op">$</span><span class="va">freq</span>,</span>
<span>  match_within <span class="op">=</span> <span class="va">selected</span><span class="op">$</span><span class="va">room</span>,</span>
<span>  match_extreme_first <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The first argument defines the covariates that should be similar in
both sets. I used the function <code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale()</a></code> before passing the
covariates to the matching function to standardize the variables. This
way, each variable has the same weight in the matching process, which is
usually desirable. The argument <code>match_between</code> is the
grouping variable based on <code>frequency</code> that I just defined.
The argument <code>match_within</code> is used to ensure that matches
are selected between words belonging to the same room. The argument
<code>match_extreme_first</code> is used to guide the behaviour of the
matching algorithm, but its precise meaning is not important for now
(for more information, see <code><a href="../reference/matching.html">?matching</a></code>). Generally, if we
plan to only keep a subset of all matches – as we do in the current
application –, we set <code>match_extreme_first</code> to
<code>FALSE</code>. If we want to keep all elements,
<code>match_extreme_first = TRUE</code> is usually better.</p>
<p>Next, let us check out some of the matches we created:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">selected</span>, <span class="va">matches</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt;            item     room rating_consistent rating_inconsistent syllables</span></span>
<span><span class="co">#&gt; 12     Wattepad bathroom              4.39                1.14         3</span></span>
<span><span class="co">#&gt; 44 Rasierschaum bathroom              4.39                1.16         3</span></span>
<span><span class="co">#&gt;    frequency list freq matches</span></span>
<span><span class="co">#&gt; 12        21    1  low       1</span></span>
<span><span class="co">#&gt; 44        17    2 high       1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">selected</span>, <span class="va">matches</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt;             item    room rating_consistent rating_inconsistent syllables</span></span>
<span><span class="co">#&gt; 29 Zuckerstreuer kitchen              4.48                1.04         4</span></span>
<span><span class="co">#&gt; 86    Mikrowelle kitchen              4.58                1.04         4</span></span>
<span><span class="co">#&gt;    frequency list freq matches</span></span>
<span><span class="co">#&gt; 29        21    1  low       2</span></span>
<span><span class="co">#&gt; 86        15    3 high       2</span></span></code></pre></div>
<p>The matches are numbered by similarity, meaning that matches with
grouping number 1 are most similar. Therefore, we can easily select the
8 best-matched groups of words that we would like include in our
experiment:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select the 8 best matches:</span></span>
<span><span class="va">final_selection</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">selected</span>, <span class="va">matches</span> <span class="op">&lt;=</span> <span class="fl">8</span><span class="op">)</span></span></code></pre></div>
<p>Last, we check the quality of the results by investigating the
descriptive statistics – means and standard deviations (in brackets) –
by condition:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check quality of the selection:</span></span>
<span><span class="fu"><a href="../reference/mean_sd_tab.html">mean_sd_tab</a></span><span class="op">(</span></span>
<span>  <span class="va">final_selection</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, </span>
<span>  <span class="va">final_selection</span><span class="op">$</span><span class="va">freq</span></span>
<span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="7%">
<col width="26%">
<col width="29%">
<col width="17%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">rating_consistent</th>
<th align="left">rating_inconsistent</th>
<th align="left">syllables</th>
<th align="left">frequency</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">high</td>
<td align="left">4.39 (0.17)</td>
<td align="left">1.10 (0.05)</td>
<td align="left">3.50 (0.53)</td>
<td align="left">16.25 (0.71)</td>
</tr>
<tr class="even">
<td align="left">low</td>
<td align="left">4.38 (0.14)</td>
<td align="left">1.09 (0.03)</td>
<td align="left">3.50 (0.53)</td>
<td align="left">21.12 (0.64)</td>
</tr>
</tbody>
</table>
<p>The descriptive statistics are similar across the sets for the
consistency ratings and the number of syllables, and dissimilar for
frequency, which is good. In general, the results can even be improved
if we can select from a larger item pool (then, more matches are
possible).</p>
<p>If we are not sure how many items should be part of our experiment,
the function <code><a href="../reference/plot_similarity.html">plot_similarity()</a></code> may help. It plots an index
of similarity (see <code><a href="../reference/plot_similarity.html">?plot_similarity</a></code>) for each match:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_similarity.html">plot_similarity</a></span><span class="op">(</span></span>
<span>  <span class="va">covariates</span>, </span>
<span>  groups <span class="op">=</span> <span class="va">selected</span><span class="op">$</span><span class="va">matches</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="stimulus-selection_files/figure-html/similarity-plot-1.png" width="700"></p>
<p>The figure depicts the sum of pairwise dissimilarities (based on the
Euclidean distance) variance per match; the larger the value, the less
homogenous the match. It seems indeed that the first eight matches are
most similar; after the 8th match, there is already a notable decline in
similarity.</p>
</div>
<div class="section level2">
<h2 id="example-1b-two-factorial-design">Example 1b: Two-factorial design<a class="anchor" aria-label="anchor" href="#example-1b-two-factorial-design"></a>
</h2>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reload the data for next example</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"schaper2019"</span><span class="op">)</span></span></code></pre></div>
<p>In another example, we construct a two-factorial design: we create
groups that differ on <code>rating_consistent</code> and
<code>rating_inconsistent</code> (these properties are orthogonally
crossed) but are similar on frequency and the number of syllables.
First, we categorize the variables frequency and syllables into two
levels, respectively. This time, I just use median splits, which means
that I do not exclude any data in this first step:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">schaper2019</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">within</a></span><span class="op">(</span><span class="va">schaper2019</span>, <span class="op">{</span></span>
<span>  <span class="va">incon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">rating_inconsistent</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">rating_inconsistent</span><span class="op">)</span>, <span class="st">"low incon"</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span>  <span class="va">incon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">rating_inconsistent</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">rating_inconsistent</span><span class="op">)</span>, <span class="st">"high incon"</span>, <span class="va">incon</span><span class="op">)</span></span>
<span>  <span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">rating_consistent</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">rating_consistent</span><span class="op">)</span>, <span class="st">"low con"</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span>  <span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">rating_consistent</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">rating_consistent</span><span class="op">)</span>, <span class="st">"high con"</span>, <span class="va">con</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Let us check how many words are left per condition:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">schaper2019</span><span class="op">$</span><span class="va">con</span>, <span class="va">schaper2019</span><span class="op">$</span><span class="va">incon</span><span class="op">)</span></span>
<span><span class="co">#&gt;           </span></span>
<span><span class="co">#&gt;            high incon low incon</span></span>
<span><span class="co">#&gt;   high con         26        22</span></span>
<span><span class="co">#&gt;   low con          27        21</span></span></code></pre></div>
<p>Next, we conduct a matching between the four groups that resulted
from crossing frequency and syllables:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Match the conditions based on covariates</span></span>
<span><span class="va">covariates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">schaper2019</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"frequency"</span>, <span class="st">"syllables"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">schaper2019</span><span class="op">$</span><span class="va">matches</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/matching.html">matching</a></span><span class="op">(</span></span>
<span>  <span class="va">covariates</span>, </span>
<span>  match_between <span class="op">=</span> <span class="va">schaper2019</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"con"</span>, <span class="st">"incon"</span><span class="op">)</span><span class="op">]</span>,</span>
<span>  match_extreme_first <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>In this application, each match consists of 4 words because we have 4
conditions, e.g.:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">schaper2019</span>, <span class="va">matches</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt;            item     room rating_consistent rating_inconsistent syllables</span></span>
<span><span class="co">#&gt; 7    Klobuerste bathroom              4.82                1.04         3</span></span>
<span><span class="co">#&gt; 47 Kloschuessel bathroom              4.84                1.13         3</span></span>
<span><span class="co">#&gt; 51 Sparschaeler  kitchen              4.32                1.00         3</span></span>
<span><span class="co">#&gt; 57   Kastenform  kitchen              4.10                1.18         3</span></span>
<span><span class="co">#&gt;    frequency list      con      incon matches</span></span>
<span><span class="co">#&gt; 7         18    1 high con  low incon       1</span></span>
<span><span class="co">#&gt; 47        18    2 high con high incon       1</span></span>
<span><span class="co">#&gt; 51        18    2  low con  low incon       1</span></span>
<span><span class="co">#&gt; 57        17    2  low con high incon       1</span></span></code></pre></div>
<p>To decide how many matched groups we would like to keep, let’s check
out the similarity plot:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot covariate similarity by match:</span></span>
<span><span class="fu"><a href="../reference/plot_similarity.html">plot_similarity</a></span><span class="op">(</span><span class="va">covariates</span>, <span class="va">schaper2019</span><span class="op">$</span><span class="va">matches</span><span class="op">)</span></span></code></pre></div>
<p><img src="stimulus-selection_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
<p>Based on the plot, we select the 10 best matches:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select the 5 best matches:</span></span>
<span><span class="va">final_selection</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">schaper2019</span>, <span class="va">matches</span> <span class="op">&lt;=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>Last, we check quality of the selection by printing the descriptive
statistics by condition:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mean_sd_tab.html">mean_sd_tab</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">final_selection</span>, select <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>, </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">final_selection</span><span class="op">$</span><span class="va">con</span>, <span class="va">final_selection</span><span class="op">$</span><span class="va">incon</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="24%">
<col width="21%">
<col width="24%">
<col width="14%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">rating_consistent</th>
<th align="left">rating_inconsistent</th>
<th align="left">syllables</th>
<th align="left">frequency</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">high con high incon</td>
<td align="left">4.68 (0.15)</td>
<td align="left">1.15 (0.06)</td>
<td align="left">3.40 (0.70)</td>
<td align="left">19.10 (1.85)</td>
</tr>
<tr class="even">
<td align="left">high con low incon</td>
<td align="left">4.70 (0.18)</td>
<td align="left">1.04 (0.03)</td>
<td align="left">3.40 (0.70)</td>
<td align="left">18.90 (1.45)</td>
</tr>
<tr class="odd">
<td align="left">low con high incon</td>
<td align="left">4.32 (0.09)</td>
<td align="left">1.17 (0.04)</td>
<td align="left">3.40 (0.70)</td>
<td align="left">18.90 (1.66)</td>
</tr>
<tr class="even">
<td align="left">low con low incon</td>
<td align="left">4.26 (0.11)</td>
<td align="left">1.04 (0.03)</td>
<td align="left">3.40 (0.70)</td>
<td align="left">18.80 (1.55)</td>
</tr>
</tbody>
</table>
<p>Again, the covariates are quite similar between sets, but with a
larger item pool even better results could be achieved.</p>
</div>
<div class="section level2">
<h2 id="example-2-anticlustering">Example 2: Anticlustering<a class="anchor" aria-label="anchor" href="#example-2-anticlustering"></a>
</h2>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reload the data for next example</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"schaper2019"</span><span class="op">)</span></span></code></pre></div>
<p>In the next example, we wish to partition the entire pool of 96 items
into 3 sets that are as similar as possible on all variables. That means
that there is no independent variable that varies between conditions;
the experimental manipulation is independent of the intrinsic stimulus
properties. Creating stimulus sets that are overall similar to each
other can be done using anticlustering (Papenberg &amp; Klau, 2020):</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Conduct anticlustering (assign all items to three similar groups)</span></span>
<span><span class="va">schaper2019</span><span class="op">$</span><span class="va">anticluster</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anticlustering.html">anticlustering</a></span><span class="op">(</span></span>
<span>  <span class="va">schaper2019</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, </span>
<span>  K <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  objective <span class="op">=</span> <span class="st">"variance"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">## check out quality of the solution</span></span>
<span><span class="fu"><a href="../reference/mean_sd_tab.html">mean_sd_tab</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">schaper2019</span>, select <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>, </span>
<span>  <span class="va">schaper2019</span><span class="op">$</span><span class="va">anticluster</span></span>
<span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">rating_consistent</th>
<th align="left">rating_inconsistent</th>
<th align="left">syllables</th>
<th align="left">frequency</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">4.49 (0.27)</td>
<td align="left">1.10 (0.07)</td>
<td align="left">3.41 (0.84)</td>
<td align="left">18.31 (2.90)</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">4.49 (0.23)</td>
<td align="left">1.10 (0.07)</td>
<td align="left">3.44 (0.88)</td>
<td align="left">18.31 (2.25)</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">4.49 (0.25)</td>
<td align="left">1.10 (0.06)</td>
<td align="left">3.41 (1.07)</td>
<td align="left">18.31 (1.99)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="example-2b-anticlustering-on-subset-selection">Example 2b: Anticlustering on subset selection<a class="anchor" aria-label="anchor" href="#example-2b-anticlustering-on-subset-selection"></a>
</h2>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Reload the data for next example</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"schaper2019"</span><span class="op">)</span></span></code></pre></div>
<p>If we do not want to include all 96 words in our experiment, we can
again use the <code><a href="../reference/matching.html">matching()</a></code> function to select a subset of
similar stimuli that we employ. Again, we wish the select three groups
that are as similar as possible on all variables, but we only use a
subset of all 96 items. To achieve this goal, we create triplets of
similar stimuli using <code><a href="../reference/matching.html">matching()</a></code>; afterwards, the items
belonging to the same triplet will be assigned to different experimental
sets. We use the argument <code>match_within</code> to ensure that all
triplets consist of items belonging to the same room:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First, identify triplets of similar word, within room</span></span>
<span><span class="va">covariates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">schaper2019</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">schaper2019</span><span class="op">$</span><span class="va">triplet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/matching.html">matching</a></span><span class="op">(</span></span>
<span>  <span class="va">covariates</span>,</span>
<span>  p <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  match_within <span class="op">=</span> <span class="va">schaper2019</span><span class="op">$</span><span class="va">room</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check out the two most similar triplets:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">schaper2019</span>, <span class="va">triplet</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt;             item    room rating_consistent rating_inconsistent syllables</span></span>
<span><span class="co">#&gt; 19  Kaffeebeutel kitchen              4.31                1.04         4</span></span>
<span><span class="co">#&gt; 58   Kaesemesser kitchen              4.28                1.04         4</span></span>
<span><span class="co">#&gt; 59 Cerankochfeld kitchen              4.34                1.04         4</span></span>
<span><span class="co">#&gt;    frequency list triplet</span></span>
<span><span class="co">#&gt; 19        22    1       1</span></span>
<span><span class="co">#&gt; 58        21    2       1</span></span>
<span><span class="co">#&gt; 59        21    2       1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">schaper2019</span>, <span class="va">triplet</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt;             item    room rating_consistent rating_inconsistent syllables</span></span>
<span><span class="co">#&gt; 27  Buttermesser kitchen              4.40                1.00         4</span></span>
<span><span class="co">#&gt; 29 Zuckerstreuer kitchen              4.48                1.04         4</span></span>
<span><span class="co">#&gt; 53  Salatbesteck kitchen              4.48                1.02         4</span></span>
<span><span class="co">#&gt;    frequency list triplet</span></span>
<span><span class="co">#&gt; 27        21    1       2</span></span>
<span><span class="co">#&gt; 29        21    1       2</span></span>
<span><span class="co">#&gt; 53        20    2       2</span></span>
<span></span>
<span><span class="co"># Select the 10 best triplets</span></span>
<span><span class="va">best</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">schaper2019</span>, <span class="va">triplet</span> <span class="op">&lt;=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>Now, we use <code><a href="../reference/anticlustering.html">anticlustering()</a></code> to assign the matched words
to different sets:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">best</span><span class="op">$</span><span class="va">anticluster</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anticlustering.html">anticlustering</a></span><span class="op">(</span></span>
<span>  <span class="va">best</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, </span>
<span>  K <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  categories <span class="op">=</span> <span class="va">best</span><span class="op">$</span><span class="va">triplet</span>,</span>
<span>  objective <span class="op">=</span> <span class="st">"variance"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>In this function call, we pass the <code>triplets</code> to the
argument <code>categories</code>, thus ensuring that the matched items
are assigned to different sets. We can confirm this worked by looking at
the cross table of <code>triplet</code> and
<code>anticluster</code>:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">best</span><span class="op">$</span><span class="va">triplet</span>, <span class="va">best</span><span class="op">$</span><span class="va">anticluster</span><span class="op">)</span></span>
<span><span class="co">#&gt;     </span></span>
<span><span class="co">#&gt;      1 2 3</span></span>
<span><span class="co">#&gt;   1  1 1 1</span></span>
<span><span class="co">#&gt;   2  1 1 1</span></span>
<span><span class="co">#&gt;   3  1 1 1</span></span>
<span><span class="co">#&gt;   4  1 1 1</span></span>
<span><span class="co">#&gt;   5  1 1 1</span></span>
<span><span class="co">#&gt;   6  1 1 1</span></span>
<span><span class="co">#&gt;   7  1 1 1</span></span>
<span><span class="co">#&gt;   8  1 1 1</span></span>
<span><span class="co">#&gt;   9  1 1 1</span></span>
<span><span class="co">#&gt;   10 1 1 1</span></span></code></pre></div>
<p>Anticlustering strives to assign the matched triplets to the
different sets in such a way that all sets are as similar as possible.
Note that by ensuring that the triplets only consisted of items from the
same room, the room was also balanced across anticlusters:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">best</span><span class="op">$</span><span class="va">room</span>, <span class="va">best</span><span class="op">$</span><span class="va">anticluster</span><span class="op">)</span></span>
<span><span class="co">#&gt;           </span></span>
<span><span class="co">#&gt;            1 2 3</span></span>
<span><span class="co">#&gt;   bathroom 5 5 5</span></span>
<span><span class="co">#&gt;   kitchen  5 5 5</span></span></code></pre></div>
<p>Last, we check out the descriptive statistics by anticluster,
confirming that the sets are indeed quite similar on all numeric
attributes:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## check out quality of the solution</span></span>
<span><span class="fu"><a href="../reference/mean_sd_tab.html">mean_sd_tab</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">best</span>, select <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>, </span>
<span>  <span class="va">best</span><span class="op">$</span><span class="va">anticluster</span></span>
<span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="left">rating_consistent</th>
<th align="left">rating_inconsistent</th>
<th align="left">syllables</th>
<th align="left">frequency</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">4.46 (0.27)</td>
<td align="left">1.08 (0.05)</td>
<td align="left">3.50 (0.97)</td>
<td align="left">19.00 (3.02)</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">4.47 (0.28)</td>
<td align="left">1.08 (0.05)</td>
<td align="left">3.50 (1.18)</td>
<td align="left">19.00 (2.67)</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">4.46 (0.22)</td>
<td align="left">1.08 (0.06)</td>
<td align="left">3.50 (0.97)</td>
<td align="left">18.90 (2.28)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Papenberg, M., &amp; Klau, G. W. (2021). Using anticlustering to
partition data sets into equivalent parts. <em>Psychological Methods,
26</em>(2), 161–174. <a href="https://doi.org/10.1037/met0000301" class="external-link uri">https://doi.org/10.1037/met0000301</a></p>
<p>Schaper, M. L., Kuhlmann, B. G., &amp; Bayen, U. J. (2019a).
Metacognitive expectancy effects in source monitoring: Beliefs,
in-the-moment experiences, or both? Journal of Memory and Language, 107,
95–110. <a href="https://doi.org/10.1016/j.jml.2019.03.009" class="external-link uri">https://doi.org/10.1016/j.jml.2019.03.009</a></p>
<p>Schaper, M. L., Kuhlmann, B. G., &amp; Bayen, U. J. (2019b).
Metamemory expectancy illusion and schema-consistent guessing in source
monitoring. Journal of Experimental Psychology: Learning, Memory, and
Cognition, 45, 470. <a href="https://doi.org/10.1037/xlm0000602" class="external-link uri">https://doi.org/10.1037/xlm0000602</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Martin Papenberg.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
