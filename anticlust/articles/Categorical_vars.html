<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using categorical variables with anticlustering • anticlust</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using categorical variables with anticlustering">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">anticlust</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.8.12</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Anticlustering_in_2025.html">Anticlustering in 2025</a>
    </li>
    <li>
      <a href="../articles/Best_practices.html">Some best practices for anticlustering</a>
    </li>
    <li>
      <a href="../articles/Categorical_vars.html">Using categorical variables with anticlustering</a>
    </li>
    <li>
      <a href="../articles/Speeding_up_anticlustering.html">Speeding up anticlustering</a>
    </li>
    <li>
      <a href="../articles/stimulus-selection.html">Using the R package anticlust for stimulus selection in experiments</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://m-py.github.io/anticlust-blog" class="external-link">Blog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/m-Py/anticlust/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using categorical variables with
anticlustering</h1>
                        <h4 data-toc-skip class="author">Martin
Papenberg</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/m-Py/anticlust/blob/HEAD/vignettes/Categorical_vars.Rmd" class="external-link"><code>vignettes/Categorical_vars.Rmd</code></a></small>
      <div class="hidden name"><code>Categorical_vars.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/m-Py/anticlust" class="external-link">anticlust</a></span><span class="op">)</span></span></code></pre></div>
<p>In this vignette I explore some ways to incorporate categorical
variables with anticlustering. The main function of
<code>anticlust</code> is <code><a href="../reference/anticlustering.html">anticlustering()</a></code>, and it has an
argument <code>categories</code>. It can be used easily enough: We just
pass the numeric variables as first argument (<code>x</code>) and our
categorical variable(s) to <code>categories</code>. I will use the
penguin data set to illustrate the usage:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">penguins</span><span class="op">)</span></span>
<span><span class="co"># First exclude cases with missing values</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">penguins</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt;   species    island bill_len bill_dep flipper_len body_mass    sex year</span></span>
<span><span class="co">#&gt; 1  Adelie Torgersen     39.1     18.7         181      3750   male 2007</span></span>
<span><span class="co">#&gt; 2  Adelie Torgersen     39.5     17.4         186      3800 female 2007</span></span>
<span><span class="co">#&gt; 3  Adelie Torgersen     40.3     18.0         195      3250 female 2007</span></span>
<span><span class="co">#&gt; 5  Adelie Torgersen     36.7     19.3         193      3450 female 2007</span></span>
<span><span class="co">#&gt; 6  Adelie Torgersen     39.3     20.6         190      3650   male 2007</span></span>
<span><span class="co">#&gt; 7  Adelie Torgersen     38.9     17.8         181      3625 female 2007</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 333</span></span></code></pre></div>
<p>In the data set, each row represents a penguin, and the data set has
four numeric variables (bill_len, bill_dep, flipper_len, body_mass) and
several categorical variables (species, island, sex) as descriptions of
the penguins.</p>
<p>Let’s call <code><a href="../reference/anticlustering.html">anticlustering()</a></code> to divide the 333 penguins
into 3 groups. We use the four the numeric variables as first argument
(i.e., the anticlustering objective is computed on the basis of the
numeric variables), and the penguins’ sex as categorical variable:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">numeric_vars</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bill_len"</span>, <span class="st">"bill_dep"</span>, <span class="st">"flipper_len"</span>, <span class="st">"body_mass"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anticlustering.html">anticlustering</a></span><span class="op">(</span></span>
<span>  <span class="va">numeric_vars</span>, </span>
<span>  K <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  categories <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">sex</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Let’s check out how well our categorical variables are balanced:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">groups</span>, <span class="va">df</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span></span>
<span><span class="co">#&gt;       </span></span>
<span><span class="co">#&gt; groups female male</span></span>
<span><span class="co">#&gt;      1     55   56</span></span>
<span><span class="co">#&gt;      2     55   56</span></span>
<span><span class="co">#&gt;      3     55   56</span></span></code></pre></div>
<p>A perfect split! Similarly, we could use the species as categorical
variable:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anticlustering.html">anticlustering</a></span><span class="op">(</span></span>
<span>  <span class="va">numeric_vars</span>, </span>
<span>  K <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  categories <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">species</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">groups</span>, <span class="va">df</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span><span class="co">#&gt;       </span></span>
<span><span class="co">#&gt; groups Adelie Chinstrap Gentoo</span></span>
<span><span class="co">#&gt;      1     49        22     40</span></span>
<span><span class="co">#&gt;      2     49        23     39</span></span>
<span><span class="co">#&gt;      3     48        23     40</span></span></code></pre></div>
<p>As good as it could be! Now, let’s use both categorical variables at
the same time:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anticlustering.html">anticlustering</a></span><span class="op">(</span></span>
<span>  <span class="va">numeric_vars</span>, </span>
<span>  K <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  categories <span class="op">=</span> <span class="va">df</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span>, <span class="st">"sex"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">groups</span>, <span class="va">df</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span></span>
<span><span class="co">#&gt;       </span></span>
<span><span class="co">#&gt; groups female male</span></span>
<span><span class="co">#&gt;      1     54   57</span></span>
<span><span class="co">#&gt;      2     56   55</span></span>
<span><span class="co">#&gt;      3     55   56</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">groups</span>, <span class="va">df</span><span class="op">$</span><span class="va">species</span><span class="op">)</span> </span>
<span><span class="co">#&gt;       </span></span>
<span><span class="co">#&gt; groups Adelie Chinstrap Gentoo</span></span>
<span><span class="co">#&gt;      1     49        22     40</span></span>
<span><span class="co">#&gt;      2     49        23     39</span></span>
<span><span class="co">#&gt;      3     48        23     40</span></span></code></pre></div>
<p>The results for the sex variable are worse than previously when we
only considered one variable at a time. This is because when using
multiple variables with the <code>categories</code> argument, all
columns are “merged” into a single column, and each combination of sex /
species is treated as a separate category. Some information on the
original variables is lost, and the results may become less
optimal—while being still pretty okay here. Alas, using only the
<code>categories</code> argument, we cannot improve this balancing even
if a better split with regard to both categorical variables would be
possible.</p>
<div class="section level2">
<h2 id="categorical-variables-as-numeric-variables">Categorical variables as numeric variables<a class="anchor" aria-label="anchor" href="#categorical-variables-as-numeric-variables"></a>
</h2>
<p>A second possibility to incorporate categorical variables is to treat
them as numeric variables and use them as part of the first argument
<code>x</code>, which is used to compute the anticlustering objective
(e.g., the diversity or variance). This approach can lead to better
results when multiple categorical variables are available, and / or if
the group sizes are unequal. Since version 0.8.12, we can use
categorical variables as part of the first argument when they are
defined as factors. Before that, we manually had to convert categorical
variables into a binary representation via
<code><a href="../reference/categories_to_binary.html">categories_to_binary()</a></code>. Manual conversion can still be
useful, as shown further below.</p>
<p>In the penguin data sets, all variables are already correctly coded,
i.e., categorical variables are defined as factors. So I generate a data
frame that includes all features – numeric and categorical features –
and use it as input for anticlustering.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_features</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">numeric_vars</span>, <span class="va">df</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span>, <span class="st">"sex"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anticlustering.html">anticlustering</a></span><span class="op">(</span></span>
<span>  <span class="va">all_features</span>,</span>
<span>  K <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"local-maximum"</span>, </span>
<span>  standardize <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">groups</span>, <span class="va">df</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span></span>
<span><span class="co">#&gt;       </span></span>
<span><span class="co">#&gt; groups female male</span></span>
<span><span class="co">#&gt;      1     55   56</span></span>
<span><span class="co">#&gt;      2     55   56</span></span>
<span><span class="co">#&gt;      3     55   56</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">groups</span>, <span class="va">df</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span><span class="co">#&gt;       </span></span>
<span><span class="co">#&gt; groups Adelie Chinstrap Gentoo</span></span>
<span><span class="co">#&gt;      1     49        22     40</span></span>
<span><span class="co">#&gt;      2     48        23     40</span></span>
<span><span class="co">#&gt;      3     49        23     39</span></span></code></pre></div>
<p>The results are quite convincing. In particular, the penguins’ sex is
better balanced than previously when we used the argument
<code>categories</code>. If we have multiple categorical variables and /
or unequal-sized groups, it may be useful to try out using categorical
variables as factors, instead of using the <code>categories</code>
argument.</p>
<p>If we also wish to ensure that the categorical variables <em>in their
combination</em> are balanced between groups, we must do some manual
data preparation. For anticlustering, categorical variables are
converted into a binary representation via “one hot” encoding. The
<code>anticlust</code> package has the convenience function
<code><a href="../reference/categories_to_binary.html">categories_to_binary()</a></code>. for this purpose.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> This is done
internally via <code><a href="../reference/anticlustering.html">anticlustering()</a></code> when using categorical
variables as part of the data input (as factors). In that case, however,
combinations of categorical variables are not considered. To consider
combinations, we can manually create our data set with binary
categorical variables, setting the optional argument
<code>use_combinations</code> of <code><a href="../reference/categories_to_binary.html">categories_to_binary()</a></code> to
<code>TRUE</code>. First, let’s see how we would manually encode
categorical variables without considering their combinations. We will
use collection year (2007, 2008, 2009) and species as categorical
variables:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">binary_categories</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/categories_to_binary.html">categories_to_binary</a></span><span class="op">(</span><span class="va">df</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span>, <span class="st">"year"</span><span class="op">)</span><span class="op">]</span>, use_combinations <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">data_input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">binary_categories</span>, <span class="va">numeric_vars</span><span class="op">)</span></span>
<span><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anticlustering.html">anticlustering</a></span><span class="op">(</span></span>
<span>  <span class="va">data_input</span>,</span>
<span>  K <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"local-maximum"</span>,</span>
<span>  standardize <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">groups</span>, <span class="va">df</span><span class="op">$</span><span class="va">year</span>, <span class="va">df</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span><span class="co">#&gt; , ,  = Adelie</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       </span></span>
<span><span class="co">#&gt; groups 2007 2008 2009</span></span>
<span><span class="co">#&gt;      1   15   17   17</span></span>
<span><span class="co">#&gt;      2   14   16   18</span></span>
<span><span class="co">#&gt;      3   15   17   17</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; , ,  = Chinstrap</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       </span></span>
<span><span class="co">#&gt; groups 2007 2008 2009</span></span>
<span><span class="co">#&gt;      1    8    7    8</span></span>
<span><span class="co">#&gt;      2    9    6    8</span></span>
<span><span class="co">#&gt;      3    9    5    8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; , ,  = Gentoo</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       </span></span>
<span><span class="co">#&gt; groups 2007 2008 2009</span></span>
<span><span class="co">#&gt;      1   11   14   14</span></span>
<span><span class="co">#&gt;      2   11   16   13</span></span>
<span><span class="co">#&gt;      3   11   15   14</span></span></code></pre></div>
<p>When setting <code>use_combinations = TRUE</code>, we will also
balance the proportions of species collected in each year across groups,
which was not explicitly done before:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">binary_categories</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/categories_to_binary.html">categories_to_binary</a></span><span class="op">(</span><span class="va">df</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span>, <span class="st">"year"</span><span class="op">)</span><span class="op">]</span>, use_combinations <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">data_input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">binary_categories</span>, <span class="va">numeric_vars</span><span class="op">)</span></span>
<span><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anticlustering.html">anticlustering</a></span><span class="op">(</span></span>
<span>  <span class="va">data_input</span>,</span>
<span>  K <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"local-maximum"</span>,</span>
<span>  standardize <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">groups</span>, <span class="va">df</span><span class="op">$</span><span class="va">year</span>, <span class="va">df</span><span class="op">$</span><span class="va">species</span><span class="op">)</span></span>
<span><span class="co">#&gt; , ,  = Adelie</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       </span></span>
<span><span class="co">#&gt; groups 2007 2008 2009</span></span>
<span><span class="co">#&gt;      1   14   17   18</span></span>
<span><span class="co">#&gt;      2   15   16   17</span></span>
<span><span class="co">#&gt;      3   15   17   17</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; , ,  = Chinstrap</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       </span></span>
<span><span class="co">#&gt; groups 2007 2008 2009</span></span>
<span><span class="co">#&gt;      1    9    6    8</span></span>
<span><span class="co">#&gt;      2    9    6    8</span></span>
<span><span class="co">#&gt;      3    8    6    8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; , ,  = Gentoo</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;       </span></span>
<span><span class="co">#&gt; groups 2007 2008 2009</span></span>
<span><span class="co">#&gt;      1   11   15   13</span></span>
<span><span class="co">#&gt;      2   11   15   14</span></span>
<span><span class="co">#&gt;      3   11   15   14</span></span></code></pre></div>
<p>Now, the year of data collection is perfectly balance across groups
for each of the three species, which is not accomplished when setting
<code>use_combinations = FALSE</code> or when using the categories as
factors, which internally sets
<code>use_combinations = FALSE</code>.</p>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>Internally, <code><a href="../reference/categories_to_binary.html">categories_to_binary()</a></code> is
wrapper around the base <code>R</code> function
<code><a href="https://rdrr.io/r/stats/model.matrix.html" class="external-link">model.matrix()</a></code>.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Martin Papenberg.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
