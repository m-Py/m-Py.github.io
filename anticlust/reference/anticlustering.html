<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Anticlustering — anticlustering • anticlust</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Anticlustering — anticlustering"><meta property="og:description" content="Partition a pool of elements into groups (i.e., anticlusters) with
the aim of creating high within-group heterogeneity and high
between-group similarity.  Anticlustering is accomplished by
maximizing instead of minimizing a clustering objective function.
Implements anticlustering methods as described in Papenberg and
Klau (2021; &amp;lt;doi:10.1037/met0000301&amp;gt;), Brusco et al. 
(2020; &amp;lt;doi:10.1111/bmsp.12186&amp;gt;), and Papenberg (2023; 
&amp;lt;doi:10.31234/osf.io/7jw6v&amp;gt;)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">anticlust</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Equivalence_Diversity_KMeans.html">On the equivalence of the k-means objective and the diversity objective</a>
    </li>
    <li>
      <a href="../articles/How_to_cite_anticlust.html">How to cite anticlust</a>
    </li>
    <li>
      <a href="../articles/Speeding_up_anticlustering.html">Speeding up anticlustering</a>
    </li>
    <li>
      <a href="../articles/stimulus-selection.html">Using the R package anticlust for stimulus selection in experiments</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/m-Py/anticlust/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Anticlustering</h1>
    <small class="dont-index">Source: <a href="https://github.com/m-Py/anticlust/blob/HEAD/R/wrapper-anticlustering.R" class="external-link"><code>R/wrapper-anticlustering.R</code></a></small>
    <div class="hidden name"><code>anticlustering.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Partition a pool of elements into groups (i.e., anticlusters) with
the aim of creating high within-group heterogeneity and high
between-group similarity.  Anticlustering is accomplished by
maximizing instead of minimizing a clustering objective function.
Implements anticlustering methods as described in Papenberg and
Klau (2021; &lt;doi:10.1037/met0000301&gt;), Brusco et al. 
(2020; &lt;doi:10.1111/bmsp.12186&gt;), and Papenberg (2023; 
&lt;doi:10.31234/osf.io/7jw6v&gt;).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">anticlustering</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">K</span>,</span>
<span>  objective <span class="op">=</span> <span class="st">"diversity"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"exchange"</span>,</span>
<span>  preclustering <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  categories <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  repetitions <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  standardize <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>The data input. Can be one of two structures: (1) A
feature matrix where rows correspond to elements and columns
correspond to variables (a single numeric variable can be
passed as a vector). (2) An N x N matrix dissimilarity matrix;
can be an object of class <code>dist</code> (e.g., returned by
<code><a href="https://rdrr.io/r/stats/dist.html" class="external-link">dist</a></code> or <code><a href="https://rdrr.io/r/stats/dist.html" class="external-link">as.dist</a></code>) or a <code>matrix</code>
where the entries of the upper and lower triangular matrix
represent pairwise dissimilarities.</p></dd>


<dt>K</dt>
<dd><p>How many anticlusters should be created. Alternatively:
(a) A vector describing the size of each group, or (b) a vector
of length <code>nrow(x)</code> describing how elements are assigned
to anticlusters before the optimization starts.</p></dd>


<dt>objective</dt>
<dd><p>The objective to be maximized. The options
"diversity" (default; previously called "distance", which is
still supported), "variance", "kplus" and "dispersion" are
natively supported. May also be a user-defined function. See
Details.</p></dd>


<dt>method</dt>
<dd><p>One of "exchange" (default) , "local-maximum",
"brusco", or "ilp".  See Details.</p></dd>


<dt>preclustering</dt>
<dd><p>Boolean. Should a preclustering be conducted
before anticlusters are created? Defaults to <code>FALSE</code>. See
Details.</p></dd>


<dt>categories</dt>
<dd><p>A vector, data.frame or matrix representing one
or several categorical variables whose distribution should be similar 
between groups. See Details.</p></dd>


<dt>repetitions</dt>
<dd><p>The number of times a search heuristic is
initiated when using <code>method = "exchange"</code>, <code>method =
"local-maximum"</code>, or <code>method = "brusco"</code>. In the end, the
best objective found across the repetitions is returned.</p></dd>


<dt>standardize</dt>
<dd><p>Boolean. If <code>TRUE</code> and <code>x</code> is a
feature matrix, the data is standardized through a call to
<code><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></code> before the optimization starts. This
argument is silently ignored if <code>x</code> is a distance matrix.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A vector of length N that assigns a group (i.e, a number
    between 1 and <code>K</code>) to each input element.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function is used to solve anticlustering. That is, the data
input is divided into <code>K</code> groups in such a way that elements
within groups are heterogeneous and the different groups are
similar. Anticlustering is accomplished by maximizing instead of
minimizing a clustering objective function. The maximization of
four clustering objective functions is natively supported (other
functions can also defined by the user as described below):</p>
<ul><li><p>cluster editing `diversity` objective, setting 
        <code>objective = "diversity"</code> (this is the default objective)</p></li>
<li><p>k-means `variance` objective, setting <code>objective = "variance"</code></p></li>
<li><p>`k-plus` objective, an extension of the k-means variance criterion,
        setting <code>objective = "kplus"</code></p></li>
<li><p>the `dispersion` objective is the minimum distance between 
        any two elements within the same cluster (setting 
        <code>objective = "dispersion"</code>)</p></li>
</ul><p>The k-means objective is the within-group variance---that is, the
sum of the squared distances between each element and its cluster
center (see <code><a href="variance_objective.html">variance_objective</a></code>). K-means
anticlustering focuses on minimizing differences with regard to the
means of the input variables <code>x</code>; k-plus <code>objective =
"kplus"</code> anticlustering is an extension of this criterion that also
tries to minimize differences with regard to the standard
deviations between groups (see <code><a href="kplus_anticlustering.html">kplus_anticlustering</a></code>).</p>
<p>The cluster editing "diversity" objective is the sum of pairwise
distances of elements within the same groups (see
<code><a href="diversity_objective.html">diversity_objective</a></code>). Anticluster editing is also
known as the »maximum diverse grouping problem« because it
maximizes group diversity as measured by the sum of pairwise
distances. Hence, anticlustering maximizes between-group similarity
by maximizing within-group heterogeneity. Note that the equivalence
of within-group heterogeneity and between-group similarity only
holds for equal-sized groups in the case of anticluster editing. 
If you request different-sized groups
and wish the different groups to be similar to each other, use
<code>objective = "kplus"</code> or <code>objective = "variance"</code>. In
previous versions of this package, <code>method = "distance"</code> was
used (and is still supported) to request anticluster editing, but
now <code>method = "diversity"</code> is preferred because there are
several clustering objectives based on pairwise distances (e.g.,
see <code><a href="dispersion_objective.html">dispersion_objective</a></code>).</p>
<p>The "dispersion" is the minimum distance between any two elements
that are part of the same cluster; maximization of this objective
ensures that any two elements within the same group are as
dissimilar from each other as possible. Applications that require
high within-group heterogeneity often require to maximize the
dispersion. Oftentimes, it is useful to also consider the diversity
and not only the dispersion; to optimize both objectives at the
same time, see the function
<code><a href="bicriterion_anticlustering.html">bicriterion_anticlustering</a></code>.</p>
<p>If the data input <code>x</code> is a feature matrix (that is: each row
is a "case" and each column is a "variable") and the option
<code>objective = "diversity"</code> is used, the Euclidean distance is
computed as the basic unit of the anticluster editing objective. If
a different measure of dissimilarity is preferred, you may pass a
self-generated dissimiliarity matrix via the argument <code>x</code>.</p>
<p>In the standard case, groups of equal size are generated. Adjust
the argument <code>K</code> to create groups of different size (see
Examples).</p>
<p><strong>Algorithms for anticlustering</strong></p>
<p>By default, a heuristic method is employed for anticlustering: the
exchange method (<code>method = "exchange"</code>). First, elements
are randomly assigned to anticlusters (It is also possible to
explicitly specify the initial assignment using the argument
<code>K</code>; in this case, <code>K</code> has length <code>nrow(x)</code>.) Based
on the initial assignment, elements are systematically swapped
between anticlusters in such a way that each swap improves the
objective value. For an element, each possible swap with elements
in other clusters is simulated; then, the one swap is performed
that improves the objective the most, but a swap is only conducted
if there is an improvement at all. This swapping procedure is
repeated for each element. When using <code>method =
"local-maximum"</code>, the exchange method does not terminate after the
first iteration over all elements; instead, the swapping continues
until a local maximum is reached. This means that after the
exchange process has been conducted once for each data point, the
algorithm restarts with the first element and proceeds to conduct
exchanges until the objective cannot be improved.</p>
<p>When setting <code>preclustering = TRUE</code>, only the <code>K - 1</code>
most similar elements serve as exchange partners for each element,
which can dramatically speed up the optimization (more information
on the preclustering heuristic follows below). This option is
recommended for larger N.</p>
<p>Using <code>method = "brusco"</code> implements the local bicriterion
iterated local search (BILS) heuristic by Brusco et al. (2020) and returns
the partition that best optimized either the diversity or the dispersion
during the optimization process. The function
<code><a href="bicriterion_anticlustering.html">bicriterion_anticlustering</a></code> can also be used to run the algorithm
by Brusco et al., but it returns multiple partitions that approximate the 
optimal pareto efficient set according to both objectives (diversity and 
dispersion). Thus, to fully utilize the BILS algorithm, use the function 
<code><a href="bicriterion_anticlustering.html">bicriterion_anticlustering</a></code>.</p>
<p><strong>Optimal anticlustering</strong></p>
<p>An optimal anticluster editing objective (i.e., a solution having
the global maximum value in diversity) can be found via integer
linear programming. The integer linear program implemented here can
be found in Papenberg &amp; Klau, (2021; (8) - (12)). To this end, set
<code>method = "ilp"</code>. To obtain an optimal solution, the open
source GNU linear programming kit (available from
https://www.gnu.org/software/glpk/glpk.html) and the R package
<code>Rglpk</code> must be installed. The optimal solution is retrieved
by setting <code>objective = "diversity"</code>, <code>method = "ilp"</code>
and <code>preclustering = FALSE</code>. Use this combination of arguments
only for small problem sizes.</p>
<p>To relax the optimality requirement, it is possible to set the
argument <code>preclustering = TRUE</code>. In this case, the anticluster
editing objective is still optimized using integer linear
programming, but a preprocessing forbids very similar elements to
be assigned to the same anticluster. The preclustering reduces the
size of the solution space, making the integer linear programming
approach applicable for larger problem instances. With
preclustering, optimality is no longer guaranteed, but the solution
is usually optimal or very close to optimal.</p>
<p><strong>Preclustering</strong></p>
<p>A useful heuristic for anticlustering is to form small groups of
very similar elements and assign these to different groups. This
logic is used as a preprocessing when setting <code>preclustering =
TRUE</code>. That is, before the anticlustering objective is optimized, a
cluster analysis identifies small groups of similar elements (pairs
if <code>K = 2</code>, triplets if <code>K = 3</code>, and so forth). The
optimization of the anticlustering objective is then conducted
under the constraint that these matched elements cannot be assigned
to the same group. When using the exchange algorithm, preclustering
is conducted using a call to <code><a href="matching.html">matching</a></code>. When using
<code>method = "ilp"</code>, the preclustering optimally finds groups of
minimum pairwise distance by solving the integer linear program
described in Papenberg and Klau (2021; (8) - (10), (12) - (13)).</p>
<p><strong>Categorical variables</strong></p>
<p>The argument <code>categories</code> may induce categorical constraints,
i.e., can be used to distribute categorical variables evenly
between sets.  The grouping variables indicated by
<code>categories</code> will be balanced out across anticlusters. This
functionality is only available for the classical exchange
procedures, that is, for <code>method = "exchange"</code> and
<code>method = "local-maximum"</code>.</p>
<p><strong>Optimize a custom objective function</strong></p>
<p>It is possible to pass a <code>function</code> to the argument
<code>objective</code>. See <code><a href="dispersion_objective.html">dispersion_objective</a></code> for an
example. If <code>objective</code> is a function, the exchange method
assigns elements to anticlusters in such a way that the return
value of the custom function is maximized (hence, the function
should return larger values when the between-group similarity is
higher). The custom function has to take two arguments: the first
is the data argument, the second is the clustering assignment. That
is, the argument <code>x</code> will be passed down to the user-defined
function as first argument. <strong>However, only after</strong>
<code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></code> has been called on <code>x</code>. This implies
that in the function body, columns of the data set cannot be
accessed using <code>data.frame</code> operations such as
<code>$</code>. Objects of class <code>dist</code> will be converted to matrix
as well.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Brusco, M. J., Cradit, J. D., &amp; Steinley, D. (2020). Combining
diversity and dispersion criteria for anticlustering: A bicriterion
approach. British Journal of Mathematical and Statistical
Psychology, 73, 275-396. https://doi.org/10.1111/bmsp.12186</p>
<p>Grötschel, M., &amp; Wakabayashi, Y. (1989). A cutting plane algorithm
for a clustering problem. Mathematical Programming, 45, 59-96.</p>
<p>Papenberg, M., &amp; Klau, G. W. (2021). Using anticlustering to partition 
data sets into equivalent parts. Psychological Methods, 26(2), 
161–174. https://doi.org/10.1037/met0000301.</p>
<p>Papenberg, M. (2023). k-plus Anticlustering: An Improved k-means Criterion 
for Maximizing Between-Group Similarity. Retrieved from psyarxiv.com/7jw6v</p>
<p>Späth, H. (1986). Anticlustering: Maximizing the variance criterion.
Control and Cybernetics, 15, 213-218.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Martin Papenberg <a href="mailto:martin.papenberg@hhu.de">martin.papenberg@hhu.de</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Optimize the cluster editing (diversity) criterion</span></span></span>
<span class="r-in"><span><span class="va">anticlusters</span> <span class="op">&lt;-</span> <span class="fu">anticlustering</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">schaper2019</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  K <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  categories <span class="op">=</span> <span class="va">schaper2019</span><span class="op">$</span><span class="va">room</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Compare feature means by anticluster</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/by.html" class="external-link">by</a></span><span class="op">(</span><span class="va">schaper2019</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, <span class="va">anticlusters</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colMeans</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                4.48                1.10                3.41               18.31 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                4.50                1.11                3.38               18.28 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                4.50                1.09                3.47               18.34 </span>
<span class="r-in"><span><span class="co"># Compare standard deviations by anticluster</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/by.html" class="external-link">by</a></span><span class="op">(</span><span class="va">schaper2019</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, <span class="va">anticlusters</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">2</span>, <span class="va">sd</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                0.25                0.07                0.87                2.38 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                0.24                0.07                0.91                2.47 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                0.26                0.06                1.02                2.39 </span>
<span class="r-in"><span><span class="co"># check that the "room" is balanced across anticlusters:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">anticlusters</span>, <span class="va">schaper2019</span><span class="op">$</span><span class="va">room</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters bathroom kitchen</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            1       16      16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            2       16      16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            3       16      16</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use multiple starts of the algorithm to improve the objective and</span></span></span>
<span class="r-in"><span><span class="co"># optimize the k-means criterion ("variance")</span></span></span>
<span class="r-in"><span><span class="va">anticlusters</span> <span class="op">&lt;-</span> <span class="fu">anticlustering</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">schaper2019</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  objective <span class="op">=</span> <span class="st">"variance"</span>,</span></span>
<span class="r-in"><span>  K <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  categories <span class="op">=</span> <span class="va">schaper2019</span><span class="op">$</span><span class="va">room</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"local-maximum"</span>,</span></span>
<span class="r-in"><span>  repetitions <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Compare means and standard deviations by anticluster</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/by.html" class="external-link">by</a></span><span class="op">(</span><span class="va">schaper2019</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, <span class="va">anticlusters</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colMeans</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                4.49                1.10                3.41               18.31 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                4.49                1.10                3.44               18.31 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                4.49                1.10                3.41               18.31 </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/by.html" class="external-link">by</a></span><span class="op">(</span><span class="va">schaper2019</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, <span class="va">anticlusters</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">2</span>, <span class="va">sd</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                0.22                0.07                1.01                2.31 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                0.25                0.07                0.84                2.32 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                0.28                0.06                0.95                2.60 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use different group sizes and optimize the extended k-means</span></span></span>
<span class="r-in"><span><span class="co"># criterion ("kplus")</span></span></span>
<span class="r-in"><span><span class="va">anticlusters</span> <span class="op">&lt;-</span> <span class="fu">anticlustering</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">schaper2019</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  objective <span class="op">=</span> <span class="st">"kplus"</span>,</span></span>
<span class="r-in"><span>  K <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">24</span>, <span class="fl">24</span>, <span class="fl">48</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  categories <span class="op">=</span> <span class="va">schaper2019</span><span class="op">$</span><span class="va">room</span>,</span></span>
<span class="r-in"><span>  repetitions <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"local-maximum"</span>,</span></span>
<span class="r-in"><span>  standardize <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">anticlusters</span>, <span class="va">schaper2019</span><span class="op">$</span><span class="va">room</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters bathroom kitchen</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            1       12      12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            2       12      12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            3       24      24</span>
<span class="r-in"><span><span class="co"># Compare means and standard deviations by anticluster</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/by.html" class="external-link">by</a></span><span class="op">(</span><span class="va">schaper2019</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, <span class="va">anticlusters</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colMeans</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                4.49                1.10                3.42               18.29 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                4.50                1.10                3.42               18.38 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                4.49                1.10                3.42               18.29 </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/by.html" class="external-link">by</a></span><span class="op">(</span><span class="va">schaper2019</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, <span class="va">anticlusters</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">2</span>, <span class="va">sd</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                0.25                0.07                0.93                2.44 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                0.25                0.07                0.93                2.41 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------------------------------------ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> anticlusters: 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   rating_consistent rating_inconsistent           syllables           frequency </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                0.25                0.07                0.94                2.40 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Use preclustering and variance (k-means) criterion on large data set</span></span></span>
<span class="r-in"><span><span class="va">N</span> <span class="op">&lt;-</span> <span class="fl">1000</span></span></span>
<span class="r-in"><span><span class="va">K</span> <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="va">lds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>f1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span>, f2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ac</span> <span class="op">&lt;-</span> <span class="fu">anticlustering</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">lds</span>, </span></span>
<span class="r-in"><span>  K <span class="op">=</span> <span class="va">K</span>,</span></span>
<span class="r-in"><span>  objective <span class="op">=</span> <span class="st">"variance"</span>,</span></span>
<span class="r-in"><span>  preclustering <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The following is equivalent to setting `preclustering = TRUE`:</span></span></span>
<span class="r-in"><span><span class="va">cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="balanced_clustering.html">balanced_clustering</a></span><span class="op">(</span><span class="va">lds</span>, K <span class="op">=</span> <span class="va">N</span> <span class="op">/</span> <span class="va">K</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ac</span> <span class="op">&lt;-</span> <span class="fu">anticlustering</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">lds</span>, </span></span>
<span class="r-in"><span>  K <span class="op">=</span> <span class="va">K</span>,</span></span>
<span class="r-in"><span>  objective <span class="op">=</span> <span class="st">"variance"</span>,</span></span>
<span class="r-in"><span>  categories <span class="op">=</span> <span class="va">cl</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Martin Papenberg.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

